<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=author content="Nathan Rooy"><meta name=copyright content="Nathan A. Rooy"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=language content="en"><meta http-equiv=content-language content="en-gb"><link rel=icon type=image/png href=/favicon/favicon.png><script defer data-domain=nathanrooy.github.io src=https://plausible.io/js/plausible.js></script><script>window.plausible=window.plausible||function(){(window.plausible.q=window.plausible.q||[]).push(arguments)}</script><meta property="og:title" content="Making STL frontal area calculations easier"><meta property="og:description" content="Quickly and easily calculate the frontal or projected area of an STL file"><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:url" content="https://nathanrooy.github.io/posts/2021-03-26/compute-stl-frontal-area/"><meta property="og:site_name" content="nathanrooy.github.io"><meta property="og:image" content="https://nathanrooy.github.io/posts/2021-03-26/compute-stl-frontal-area/clay-render-01.jpg"><title>Making STL frontal area calculations easier</title><link rel=canonical href=https://nathanrooy.github.io/posts/2021-03-26/compute-stl-frontal-area/ itemprop=url><base href=https://nathanrooy.github.io/posts/2021-03-26/compute-stl-frontal-area/><meta itemprop=name content="Making STL frontal area calculations easier | Nathan Rooy"><meta itemprop=description content="Quickly and easily calculate the frontal or projected area of an STL file"><meta itemprop=image content="https://nathanrooy.github.io/posts/2021-03-26/compute-stl-frontal-area/clay-render-01.jpg"><meta name=description content="Quickly and easily calculate the frontal or projected area of an STL file"><meta name=application-name content="Making STL frontal area calculations easier | Nathan Rooy"><meta name=keywords content="stl,,fontal,area,,frontal-area,,projected,area,,projected-area,,aerodynamics,,python"><meta name=twitter:card content="nathanrooy.github.io"><meta name=twitter:url content="https://nathanrooy.github.io/posts/2021-03-26/compute-stl-frontal-area/"><meta name=twitter:title content="Making STL frontal area calculations easier | Nathan Rooy"><meta name=twitter:description content="Quickly and easily calculate the frontal or projected area of an STL file"><meta name=twitter:image content="https://nathanrooy.github.io/posts/2021-03-26/compute-stl-frontal-area/clay-render-01.jpg"><link rel=alternate type=application/rss+xml href=https://nathanrooy.github.io/index.xml title="Nathan Rooy"><style>/*!normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css*/html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:initial}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button}button::-moz-focus-inner,[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{border-style:none;padding:0}button:-moz-focusring,[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}:root{--main-text-color:#222;--main-text-weight:400;--text-bold:600;--font-family:"Figtree", sans-serif}body{-webkit-font-smoothing:antialiased}@font-face{font-family:figtree;font-style:normal;font-weight:400;font-display:swap;src:url(/fonts/figtree-v1-latin-regular.eot);src:local(''),url(/fonts/figtree-v1-latin-regular.eot?#iefix)format('embedded-opentype'),url(/fonts/figtree-v1-latin-regular.woff2)format('woff2'),url(/fonts/figtree-v1-latin-regular.woff)format('woff'),url(/fonts/figtree-v1-latin-regular.ttf)format('truetype'),url(/fonts/figtree-v1-latin-regular.svg#Figtree)format('svg')}@font-face{font-family:figtree;font-style:normal;font-weight:600;font-display:swap;src:url(/fonts/figtree-v1-latin-600.eot);src:local(''),url(/fonts/figtree-v1-latin-600.eot?#iefix)format('embedded-opentype'),url(/fonts/figtree-v1-latin-600.woff2)format('woff2'),url(/fonts/figtree-v1-latin-600.woff)format('woff'),url(/fonts/figtree-v1-latin-600.ttf)format('truetype'),url(/fonts/figtree-v1-latin-600.svg#Figtree)format('svg')}.home-page{font-family:var(--font-family);color:var(--main-text-color);margin-top:0}.home-page ul li{margin-bottom:.3rem}.home-page ul a{color:var(--main-text-color)}.post-li-title{width:95%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;float:left}.post-li-date{float:left;padding-bottom:1em;font-size:16px;color:#a9a9a9}@media only screen and (min-width:501px){.wrapper{max-width:660px;margin:0 auto;padding:1rem}.container{margin-top:10rem}.post-li-title{font-size:19px}.post-ul{list-style-type:none;padding-left:0;list-style:none;line-height:1.6em;margin-top:0}.post-li{overflow:hidden}}@media only screen and (max-width:950px){.container{margin-top:0}}@media only screen and (max-width:500px){.wrapper{margin:0 auto}.container{margin:2rem 1rem 1rem}.post-ul{list-style-type:none;padding-left:0;list-style:none;line-height:1.5em;margin-top:.2rem}.post-li{overflow:hidden}}.nyc-progress-image{margin-top:-1rem}.strava-grid{padding-top:1rem}.language-python{font-size:.8rem;line-height:0}.highlight{margin-bottom:1rem}.personal-social-media{text-align:center}.personal-social-media a{display:inline-block;padding-left:5px;padding-right:5px}.about h3{margin-top:0;padding-top:0}.about li{margin-bottom:0;padding-bottom:0}.about-ul li{margin-bottom:.5rem}footer{padding-bottom:6rem;font-family:var(--font-family);font-size:.75em;color:#999;margin-top:3rem;line-height:1.2rem}footer a{color:#555;font-weight:var(--main-text-weight)}footer a:hover{text-decoration:underline;color:#555}footer a:visited{color:#555}.footnotes{line-height:1rem;font-size:15px;margin-top:1em}.footnotes hr{display:none}.footnotes li p{line-height:1rem;margin-bottom:0}.footnotes ol{list-style:none;counter-reset:list;padding-left:2.5em;font-size:15px}.footnotes ol>li{list-style:none;position:relative}.footnotes ol>li:before{counter-increment:list;content:"[" counter(list)"] ";position:absolute;left:-2.5em;font-size:15px}ul.flat{margin:0;padding:0}ul.flat li{display:inline-block;list-style:none;margin-left:0}.markdown .post-update{background-color:#f2f2f2;border-left:10px solid;border-color:#e74c3c;padding-top:1.5rem;padding-left:1.5rem;padding-bottom:1.5rem;padding-right:1.5rem;margin-top:1rem;margin-left:0;margin-right:0;margin-bottom:2rem;line-height:1.5rem;font-weight:var(--main-text-weight);font-size:15px}.highlighter-rouge{position:relative;font-size:.75rem;color:var(--main-text-color);border:1px solid;border-color:#e6e6e6;border-radius:3px;background-color:#f2f2f2;padding:.1rem .2rem}.figcaption{font-size:.8rem;padding-bottom:1rem}.markdown .photoset-grid-lightbox{margin-bottom:1rem}.markdown{font-family:var(--font-family);color:var(--main-text-color);padding-bottom:3rem}.markdown ol{font-weight:var(--main-text-weight);font-size:16px;margin-top:0;padding-bottom:0;line-height:1.2rem;padding-right:2em;width:85%;margin-block-end:.25em}.markdown ol li{padding-bottom:.75em}.markdown p{font-weight:var(--main-text-weight);font-size:16px;margin-top:0;margin-bottom:1rem;line-height:1.7rem;letter-spacing:.02rem}.markdown blockquote{background-color:#f2f2f2;border-left:10px solid;border-color:#2dad60;padding-top:1.5rem;padding-left:1.5rem;padding-bottom:1.5rem;padding-right:1.5rem;margin-top:0;margin-left:0;margin-right:0;margin-bottom:1rem;line-height:1.5rem;font-weight:var(--main-text-weight);font-size:15px}.markdown blockquote p{margin-bottom:0}.markdown h2{font-family:figtree;font-size:1.1rem;font-weight:var(--text-bold);margin-bottom:.4em}*+h2{padding-top:2rem}.markdown .ul-style-b li{margin-bottom:.5rem;font-size:16px}.TLDR{font-family:var(--font-family);padding-top:0;margin-top:0;padding-bottom:4rem;margin-bottom:0;font-size:1.1rem;line-height:1.7rem;font-weight:var(--main-text-weight);letter-spacing:.02rem}table{width:100%;font-size:14px;letter-spacing:-.01em;border-collapse:collapse;margin-bottom:2em;margin-top:2em;font-weight:var(--main-text-weight);line-height:1.2rem}table th{text-align:left}table thead{border-bottom:1px solid var(--main-text-color);line-height:1.4em}.post-header h1{font-weight:var(--main-text-weight);font-size:2rem;font-family:var(--font-family);color:var(--main-text-color);line-height:2.4rem}.post ul li{margin-bottom:10px}.post ul li p{display:inline}.post .post-header{margin-bottom:5rem}.post .post-header .title{margin:0}.post .post-header .meta{padding-left:0;margin-top:10px}.post .post-header a{color:#999}.post .post-header a:hover{text-decoration:underline}.post .post-header a:visited{color:#999}.separator{display:flex;align-items:center;text-align:center}.separator::before,.separator::after{content:'';flex:1;border-bottom:1px solid #000}.separator:not(:empty)::before{margin-right:.25em}.separator:not(:empty)::after{margin-left:.25em}a{text-decoration:none;color:#0955b5}a:hover{text-decoration:underline}a:visited{color:#205caa}::selection{background:#fff9c4;text-shadow:none}img{margin:1.5em auto;max-width:100%;display:block}a img{border:none}figure{margin:0;text-align:center}ul{padding-left:15px}ul{list-style:disc inside}.markdown ul li{font-size:15px}.highlight pre{margin-bottom:0;margin-top:0;padding:20px;background-color:initial!important;overflow:auto;word-wrap:normal;white-space:pre}.highlight{background:0 0;background-color:#fafafa}.meta{font-family:var(--font-family);font-size:.8rem;color:#999;margin-bottom:4px}.list .posts .post .meta{margin-bottom:0;margin-left:5px}.markdown .photoset-grid-lightbox{margin-bottom:1rem}table .katex-display{margin-top:.2rem;margin-bottom:.2rem}.post ul li .katex-display{display:inline-block;list-style:none;margin-left:0;margin-bottom:0;line-height:0;padding:0}@media only screen and (min-width:501px){#burger{padding-left:2rem;padding-top:2rem}}@media only screen and (max-width:950px){#burger{padding-left:1rem;padding-top:1rem;padding-bottom:1.5rem}}@media only screen and (max-width:500px){#burger{padding-left:1rem;padding-top:1rem}}#burger{font-family:var(--font-family);font-weight:400;color:#a9a9a9;font-size:1.5rem}#burger a{display:inline-block;padding-right:.5rem;padding-bottom:.3rem;vertical-align:bottom}#burger label{cursor:pointer}#burger label:hover{color:var(--main-text-color)}#nav-icons{padding-left:1rem}#nav-icons img{height:20px;margin:0;padding:0}#l1-val{position:relative;top:-.12rem}#l2-val{position:relative;top:-.2rem;padding-left:.1rem;padding-right:.1rem}#burger-cbox{display:none}#label-1{display:inline-block}#label-2{display:none}#burger-cbox:not(:checked)~#nav-icons{display:none}#burger-cbox:checked~#nav-icons{display:inline-block}#burger-cbox:checked~#label-1{display:none}#burger-cbox:checked~#label-2{display:inline-block;color:var(--main-text-color)}</style></head><body><div class=header><nav role=navigation><div id=burger><input type=checkbox id=burger-cbox autocomplete=off>
<label id=label-1 for=burger-cbox><span>[</span><span id=l1-val>+</span><span>]</span></label>
<label id=label-2 for=burger-cbox><span>[</span><span id=l2-val>x</span><span>]</span></label><div id=nav-icons><a href=/><img src=/icons/home_feather.svg alt="home page icon"></a>
<a href=/reading><img src=/icons/book.svg alt="reading icon"></a>
<a href=/nyc_biking><img src=/icons/bicycle.svg alt="biking page icon"></a>
<a href=/about><img src=/icons/user_feather.svg alt="about page icon"></a>
<a href=/index.xml><img src=/icons/rss_feather_black.svg alt="rss page icon"></a></div></div></nav></div><div class="container wrapper post"><div class=post-header><h1 class=title>Making STL frontal area calculations easier</h1><div class=meta><a href=/>Nathan Rooy</a> | March 26, 2021</div></div><div class=markdown><h2 id=introduction>Introduction</h2><p>When working with aerodynamic properties such as <a target=_blank rel="noopener noreferrer" href=https://en.wikipedia.org/wiki/Drag_coefficient>drag</a>, it&rsquo;s common practice to normalize these values against some sort of reference area. For most ground vehicles with a pressure dominated drag contribution this ends up being the cross-sectional area as seen from the front (or projected onto the inlet plane). Most of the time, acquiring these values is pretty easy, especially if you&rsquo;re dealing with some nice clean CAD files. Annoyingly though, sometimes all you have are the non-parametric, triangulated geometry (<a target=_blank rel="noopener noreferrer" href=https://en.wikipedia.org/wiki/STL_(file_format)>STL</a>) files. Either way, you only have a few options (Blender, ParaView, etc..) and they&rsquo;re all fairly tedious, time consuming, and not as precise as it could be. This is an annoying bottleneck which is further exacerbated in fast paced work environments such as motorsport. Because of this, I wrote a simple CLI called <a target=_blank rel="noopener noreferrer" href=https://github.com/nathanrooy/p-area>pArea</a> which aims to reduce this process down to a single command.</p><h2 id=example-usage>Example usage</h2><p>As a simple use case, let&rsquo;s determine the frontal area of some old <a target=_blank rel="noopener noreferrer" href=https://en.wikipedia.org/wiki/Le_Mans_Prototype>LMP</a> geometry I had laying around. They started out as <a target=_blank rel="noopener noreferrer" href=https://en.wikipedia.org/wiki/IGES>IGES</a> files and were exported as STLs via <a target=_blank rel="noopener noreferrer" href=https://sourceforge.net/projects/netgen-mesher/>NETGEN</a>. Here&rsquo;s a clay rendering to get an idea of what it looks like (pretend like I didn&rsquo;t forget to include the body panel latches&mldr;).</p><img src=clay-render-02.jpg style=width:100%;aspect-ratio:1800/650 alt="le mans stl vehicle geometry"><p>First step is to install pArea using <a target=_blank rel="noopener noreferrer" href=https://pypi.org/>PyPi</a>, so open a terminal and slap in the following:</p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>pip install parea
</code></pre></div><p>Next, call <code>parea</code> and specify the geometry. In this case it&rsquo;s an a collection of STL files so I&rsquo;m using <code>-stl</code> along with a shell-style wildcard <code>*</code> to capture them. Lastly, I&rsquo;m specifying the direction in which I want the projected area (I could have specified the projection plane -yz instead).</p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>parea -stl *.stl -x
</code></pre></div><p>Which yields a value of 1.7139905&mldr; units<sup>2</sup>. In this case, the STL base units are meters which makes the area m<sup>2</sup>. If you&rsquo;re looking for geometry to test, I included a simple cube STL [<a target=_blank rel="noopener noreferrer" href=https://github.com/nathanrooy/p-area/blob/main/tests/data/cube_ascii.stl>link</a>].</p><h2 id=final-thoughts>Final thoughts</h2><p>I originally wrote this out in C with plans wrap it in Python, but ended up just porting everything to Python instead. Because of this, it&rsquo;s not as fast as I would like. If you end up using pArea and think it&rsquo;s too slow, <a target=_blank rel="noopener noreferrer" href=https://github.com/nathanrooy/p-area/issues>open up an issue</a> on GitHub or reach out to me! While completing the initial C based version of pArea, I ended up reading a few good books along the way which really helped:</p><ul><li>Computational Geometry: Algorithms and Applications | <a target=_blank rel="noopener noreferrer" href=https://www.goodreads.com/book/show/316275.Computational_Geometry>goodreads</a></li><li>Computational Geometry in C | <a target=_blank rel="noopener noreferrer" href=https://www.goodreads.com/book/show/657870.Computational_Geometry_in_C>goodreads</a></li><li>Finite Element Mesh Generation | <a target=_blank rel="noopener noreferrer" href=https://www.goodreads.com/book/show/13716077-finite-element-mesh-generation>goodreads</a></li><li>Command Line Interface Guidelines | <a target=_blank rel="noopener noreferrer" href=https://clig.dev/>link</a></li></ul><p>The second book I have listed: <i>Computational Geometry in C by Joseph O&rsquo;Rourke</i> is an especially good book and anyone interested in geometry/algorithms will likely enjoy it. Thanks for reading!</p><p>- Nathan</p><img src=logo.svg style=width:260px;height:97px;margin-top:3rem;margin-bottom:0 alt="p-area frontal area calculator logo"></div><div class=separator><ul class=flat><li><a onclick="plausible('home-icon',{props:{method:'Making STL frontal area calculations easier'}})" href=/><img style=min-width:30px;position:relative;top:5px;width:20px;height:20px src=/icons/home_feather.svg alt="home page icon"></a></li><li><a onclick="plausible('about-icon',{props:{method:'Making STL frontal area calculations easier'}})" href=/about><img style=min-width:30px;position:relative;top:5px;width:20px;height:20px src=/icons/user_feather.svg alt="about page icon"></a></li><li><a onclick="plausible('rss-icon',{props:{method:'Making STL frontal area calculations easier'}})" href=/index.xml target=_blank><img style=min-width:30px;position:relative;top:5px;width:20px;height:20px src=/icons/rss_feather_black.svg alt="rss page icon"></a></li></ul></div></div><footer><center>&copy; <a href=/about>Nathan A. Rooy</a>.<br>Built with <a target=_blank rel="noopener noreferrer" href=https://gohugo.io/>Hugo</a>.
Powered by <a target=_blank rel="noopener noreferrer" href=http://www.github.com>GitHub</a></center></footer></body></html>