<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=author content="Nathan Rooy"><meta name=copyright content="Nathan A. Rooy"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=language content="en"><link rel=icon type=image/png href=/favicon/favicon.png><title itemprop=name>Nathan Rooy</title><link rel=canonical href=https://nathanrooy.github.io/posts/2021-03-26/compute-stl-frontal-area/ itemprop=url><base href=https://nathanrooy.github.io/posts/2021-03-26/compute-stl-frontal-area/><meta itemprop=name content="Making STL frontal/<wbr>projected area calculations easier | Nathan Rooy"><meta itemprop=description content="Easily calculate the frontal/projected area of an STL file"><meta name=description content="Easily calculate the frontal/projected area of an STL file"><meta name=application-name content="Making STL frontal/<wbr>projected area calculations easier | Nathan Rooy"><meta name=keywords content="stl,fontal area,frontal-area,projected area,projected-area,aerodynamics,python"><meta name=twitter:card content="nathanrooy.github.io"><meta name=twitter:url content="https://nathanrooy.github.io/posts/2021-03-26/compute-stl-frontal-area/"><meta name=twitter:title content="Making STL frontal/<wbr>projected area calculations easier | Nathan Rooy"><meta name=twitter:description content="Easily calculate the frontal/projected area of an STL file"><meta property="og:title" content="Making STL frontal/<wbr>projected area calculations easier"><meta property="og:description" content="Easily calculate the frontal/projected area of an STL file"><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:url" content="https://nathanrooy.github.io/posts/2021-03-26/compute-stl-frontal-area/"><meta property="og:site_name" content="nathanrooy.github.io"><meta itemprop=image content="https://nathanrooy.github.io/posts/2021-03-26/compute-stl-frontal-area/clay-render-01.jpg"><meta property="og:image" content="https://nathanrooy.github.io/posts/2021-03-26/compute-stl-frontal-area/clay-render-01.jpg"><meta name=twitter:image content="https://nathanrooy.github.io/posts/2021-03-26/compute-stl-frontal-area/clay-render-01.jpg"><meta name=twitter:image:src content="https://nathanrooy.github.io/posts/2021-03-26/compute-stl-frontal-area/clay-render-01.jpg"><link rel=alternate type=application/rss+xml href=https://nathanrooy.github.io/index.xml title="Nathan Rooy"><link href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,300italic,400italic|Raleway:200,300" rel=stylesheet><script>(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-88488688-1','auto'),ga('send','pageview')</script><link rel=stylesheet type=text/css media=screen href=https://nathanrooy.github.io/css/normalize.css><link rel=stylesheet type=text/css media=screen href=https://nathanrooy.github.io/css/main.css></head><body><div class="container wrapper post"><div class=header><div style=width:100%;display:inline class=site-title><h1 style=display:inline><a href=https://nathanrooy.github.io/>Nathan Rooy</a></h1><a style=float:right;padding-left:10px;display:inline target=_blank href=/index.xml title=rss><img style=margin:0;padding-top:1.2em src=/icons/rss_feather.svg width=20 height=20></a>
<a style=float:right;padding-left:10px;display:inline target=_blank href=https://github.com/nathanrooy/ title=github><img style=margin:0;padding-top:1.2em src=/icons/github_feather.svg width=20 height=20></a></div><hr style=width:100%;display:inline-block><nav class=nav><ul class=flat><li style=text-align:center;vertical-align:top><a href=/><img height=20px style=margin:0;padding:0 src=/icons/home_feather.svg></a></li><li style=text-align:center;vertical-align:top><a href=/about><img height=20px style=margin:0;padding:0 src=/icons/user_feather.svg></a></li><li style=text-align:center;vertical-align:top><a href=/nyc_biking><img height=20px style=margin:0;padding:0 src=/icons/bicycle.svg></a></li><li><a href=/favorites><img height=20px style=margin:0;padding:0 src=/icons/trending-up_feather.svg></a></li></ul></nav></div><div class=post-header><h1 class=title>Making STL frontal/<wbr>projected area calculations easier</h1><div class=meta>Posted: March 26, 2021</div></div><div class=markdown><h3 id=introduction>Introduction</h3><p>When working with aerodynamic properties such as <a target=_blank href=https://en.wikipedia.org/wiki/Drag_coefficient>drag</a>, it&rsquo;s common practice to normalize these values against some sort of reference area. For most ground vehicles with a pressure dominated drag contribution this ends up being the cross-sectional area as seen from the front (or projected onto the inlet plane). Most of the time, acquiring these values is pretty easy, especially if you&rsquo;re dealing with some nice clean CAD files. Annoyingly though, sometimes all you have are the non-parametric, triangulated geometry (<a target=_blank href=https://en.wikipedia.org/wiki/STL_(file_format)>STL</a>) files. Either way, you only have a few options (Blender, ParaView, etc..) and they&rsquo;re all fairly tedious, time consuming, and not as precise as it could be. This is an annoying bottleneck which is further exacerbated in fast paced work environments such as motorsport. Because of this, I wrote a simple CLI called <a target=_blank href=https://github.com/nathanrooy/p-area>pArea</a> which aims to reduce this process down to a single command.</p><h3 id=example-usage>Example usage</h3><p>As a simple use case, let&rsquo;s determine the frontal area of some old <a target=_blank href=https://en.wikipedia.org/wiki/Le_Mans_Prototype>LMP</a> geometry I had laying around. They started out as <a target=_blank href=https://en.wikipedia.org/wiki/IGES>IGES</a> files and were exported as STLs via <a target=_blank href=https://sourceforge.net/projects/netgen-mesher/>NETGEN</a>. Here&rsquo;s a clay rendering to get an idea of what it looks like (pretend like I didn&rsquo;t forget to include the body panel latches&mldr;).</p><figure><img src=clay-render-02.jpg></figure><p>First step is to install pArea using <a target=_blank href=https://pypi.org/>PyPi</a>, so open a terminal and slap in the following:</p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>pip install parea
</code></pre></div><p>Next, call <code>parea</code> and specify the geometry. In this case it&rsquo;s an a collection of STL files so I&rsquo;m using <code>-stl</code> along with a shell-style wildcard <code>*</code> to capture them. Lastly, I&rsquo;m specifying the direction in which I want the projected area (I could have specified the projection plane -yz instead).</p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>parea -stl *.stl -x
</code></pre></div><p>Which yields a value of 1.7139905&mldr; units<sup>2</sup>. In this case, the STL base units are meters which makes the area m<sup>2</sup>. If you&rsquo;re looking for geometry to test, I included a simple cube STL <a target=_blank href=https://github.com/nathanrooy/p-area/blob/main/tests/data/cube_ascii.stl>here</a>.</p><h3 id=final-thoughts>Final thoughts</h3><p>I originally wrote this out in C with plans wrap it in Python, but ended up on just porting everything to Python. Because of this, it&rsquo;s not as fast as I would like. If you end up using pArea and think it&rsquo;s too slow, <a target=_blank href=https://github.com/nathanrooy/p-area/issues>open up an issue</a> on GitHub or reach out to me! While completing the initial C based version of pArea, I ended up reading a few good books along the way which really helped:</p><ul><li>Computational Geometry: Algorithms and Applications | <a target=_blank href=https://www.goodreads.com/book/show/316275.Computational_Geometry>goodreads</a></li><li>Computational Geometry in C | <a target=_blank href=https://www.goodreads.com/book/show/657870.Computational_Geometry_in_C>goodreads</a></li><li>Finite Element Mesh Generation | <a target=_blank href=https://www.goodreads.com/book/show/13716077-finite-element-mesh-generation>goodreads</a></li><li>Command Line Interface Guidelines | <a target=_blank href=https://clig.dev/>link</a></li></ul><p>The second book I have listed: <i>Computational Geometry in C by Joseph O&rsquo;Rourke</i> is an especially good book and anyone interested in geometry/algorithms will likely enjoy it. Thanks for reading!</p><p>- Nathan<figure><img src=logo.svg></figure></p></div><hr></div><div class=footer><center>&copy; <a href=/about>Nathan A. Rooy</a>.<br>Built with <a target=_blank href=https://gohugo.io/ rel=nofollow>Hugo</a>.
Powered by <a target=_blank href=http://www.github.com>GitHub</a></center></div></body></html>