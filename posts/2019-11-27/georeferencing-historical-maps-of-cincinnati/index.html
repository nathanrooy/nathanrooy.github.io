<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=author content="Nathan Rooy"><meta name=copyright content="Nathan A. Rooy"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=language content="en"><link rel=icon type=image/png href=/favicon/favicon.png><title itemprop=name>Nathan Rooy</title><link rel=canonical href=https://nathanrooy.github.io/posts/2019-11-27/georeferencing-historical-maps-of-cincinnati/ itemprop=url><base href=https://nathanrooy.github.io/posts/2019-11-27/georeferencing-historical-maps-of-cincinnati/><meta itemprop=name content="Visualizing One Hundred Years of Cincinnati Maps | Nathan Rooy"><meta itemprop=description content="Visualizing One Hundred Years of Cincinnati Maps"><meta name=description content="Visualizing One Hundred Years of Cincinnati Maps"><meta name=application-name content="Visualizing One Hundred Years of Cincinnati Maps | Nathan Rooy"><meta name=twitter:card content="nathanrooy.github.io"><meta name=twitter:url content="https://nathanrooy.github.io/posts/2019-11-27/georeferencing-historical-maps-of-cincinnati/"><meta name=twitter:title content="Visualizing One Hundred Years of Cincinnati Maps | Nathan Rooy"><meta name=twitter:description content="Visualizing One Hundred Years of Cincinnati Maps"><meta property="og:title" content="Visualizing One Hundred Years of Cincinnati Maps"><meta property="og:description" content="Visualizing One Hundred Years of Cincinnati Maps"><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:url" content="https://nathanrooy.github.io/posts/2019-11-27/georeferencing-historical-maps-of-cincinnati/"><meta property="og:site_name" content="nathanrooy.github.io"><meta itemprop=image content="https://nathanrooy.github.io/posts/2019-11-27/georeferencing-historical-maps-of-cincinnati/initial-compare.jpg"><meta property="og:image" content="https://nathanrooy.github.io/posts/2019-11-27/georeferencing-historical-maps-of-cincinnati/initial-compare.jpg"><meta name=twitter:image content="https://nathanrooy.github.io/posts/2019-11-27/georeferencing-historical-maps-of-cincinnati/initial-compare.jpg"><meta name=twitter:image:src content="https://nathanrooy.github.io/posts/2019-11-27/georeferencing-historical-maps-of-cincinnati/initial-compare.jpg"><link rel=alternate type=application/rss+xml href=https://nathanrooy.github.io/index.xml title="Nathan Rooy"><link href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,300italic,400italic|Raleway:200,300" rel=stylesheet><script>(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-88488688-1','auto'),ga('send','pageview')</script><link rel=stylesheet type=text/css media=screen href=https://nathanrooy.github.io/css/normalize.css><link rel=stylesheet type=text/css media=screen href=https://nathanrooy.github.io/css/main.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css integrity=sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js integrity=sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js integrity=sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI crossorigin=anonymous onload=renderMathInElement(document.body)></script></head><body><div class="container wrapper post"><div class=header><div style=width:100%;display:inline class=site-title><h1 style=display:inline><a href=https://nathanrooy.github.io/>Nathan Rooy</a></h1><a style=float:right;padding-left:10px;display:inline target=_blank href=/index.xml title=rss><img style=margin:0;padding-top:1.2em src=/icons/rss_feather.svg width=20 height=20></a>
<a style=float:right;padding-left:10px;display:inline target=_blank href=https://github.com/nathanrooy/ title=github><img style=margin:0;padding-top:1.2em src=/icons/github_feather.svg width=20 height=20></a></div><hr style=width:100%;display:inline-block><nav class=nav><ul class=flat><li style=text-align:center;vertical-align:top><a href=/><img height=20px style=margin:0;padding:0 src=/icons/home_feather.svg></a></li><li style=text-align:center;vertical-align:top><a href=/about><img height=20px style=margin:0;padding:0 src=/icons/user_feather.svg></a></li><li><a href=/favorites><img height=20px style=margin:0;padding:0 src=/icons/trending-up_feather.svg></a></li></ul></nav></div><div class=post-header><h1 class=title>Visualizing One Hundred Years of Cincinnati Maps</h1><div class=meta>Posted: November 27, 2019 , updated: April 10, 2021</div></div><div class=markdown><link href=jquery-ui.min.css rel=stylesheet><script src=jquery.min.js></script><script src=jquery-ui.min.js></script><script src=leaflet_v1.3.1.js></script><script src=leaflet-side-by-side.js></script><script src=post.js></script><link href=leaflet_v1.3.1.css rel=stylesheet><link href=leaflet.fullscreen.css rel=stylesheet><script src=Leaflet.fullscreen.min.js></script><script src=leaflet-hash.js></script><script src=jquery.ui.touch-punch.min.js></script><style>#map{width:100%;height:600px}#date_slider_container{position:absolute;top:124px;left:8px;z-index:1000}#date_slider{margin:14px;height:200px}#selected_year{font-size:20px;color:grey;background-color:#fff;font-weight:700;position:absolute;bottom:200px;left:34px;border-radius:10px;padding-right:.4em;padding-left:.4em}</style><h3>Introduction</h3><p>A while back, someone posted on the Cincinanti subreddit an interesting mapping artifact. I didn&rsquo;t know the answer to the question, but it got me thinking about what else has changed over time in Cincinnati in regards to maps and names? Luckly the <a target=_blank href=https://digital.cincinnatilibrary.org/>Cincinnati Public Library Digital Archives</a> has a wealth of information on just this topic.</p><p><img title="cincinnati reddit mapping mystery" style=height:500px src=Screenshot_20180831-123158.png></p><p>I ended up downloading about a dozen maps ranging from as early as 1815 to as recent as 1900. I then <a target=_blank href=https://en.wikipedia.org/wiki/Georeferencing>georeferenced</a> these maps against a single modern map using known commonalites such as prominant intersections and landmarks. This standardization process, although a bit tedious, results in a final product which allows for a true apples to apples comparison. At this point, the maps can be stacked on top of each other and visualized. Below is the end result of this (make sure to go fullscreen!). For more on the technical details, see the <a href=#methodology>methodology section</a> below.</p><div id=map><div id=date_slider_container title="Change year"><div id=date_slider></div><div id=selected_year></div></div></div><h3>Final Thoughts</h3><p>After a few weeks of georeferencing these maps, I noticed a few noteworthy observations, the first of which was the gradual development of <a target=_blank href=https://en.wikipedia.org/wiki/Washington_Park_(Cincinnati,_Ohio)>Washington Park</a> and surrounding areas. Back when Cincinnati was just a small town, the decision was made to build a cemetery on the northern most edge of the city. At the time, this land would have represented the boundary between civilization and untamed wilderness. Fast forward almost two hundred years and the city has not only expanded out far beyond these initial cemeteries, but they have become the focal point of present day downtown! Today, only a few headstones remain while the rest has been replaced with grass, a dog park and <a target=_blank href=https://en.wikipedia.org/wiki/Cincinnati_Music_Hall>Music Hall</a>.</p><p><img title="cincinnati washington park" src=washington-park.jpg></p><p>Another interesting observation centers around <a target=_blank href=https://en.wikipedia.org/wiki/Burnet_Woods>Burnet Woods</a> and the University of Cincinnati. I knew that UC was founded in 1819, however I never knew that the land it was built on was taken from Burnet Woods. It appears that the UCâ€™s campus has shaved off nearly half of the original Burnet Woods.</p><p><img title="cincinnati burnet woods" src=burnet_woods_3way_with_dates.png></p><p>Lastly, and most importantly is the tragic renaming of Zig Zag Avenue to Fairview Avenue sometime between 1898 and today. For starters, Zig Zag Ave is the name every other street wish it had. Seriously, not even <a target=_blank href=https://en.wikipedia.org/wiki/Lombard_Street_(San_Francisco)>Lombard St.</a> is good enough for a name like that. Fairview Ave is the kind of thoughtless generic street name that belongs out in suburbia, not Clifton. What kind of monster thought this was a good idea?</p><p><img title="cincinnati zig zag avenue" src=zig-zag-ave.jpg></p><p>Hopefully this can serve as a useful tool for anyone doing historical research or maybe just a fun way to explore this great city. If anyone stumbles across some high resolution maps, feel free to reach out and I can add them.</p><p>Thanks for reading, and bring back Zig Zag Ave!</p><h3>Acknowledgements</h3><p>Special thanks to Diane at the Cincinnati Public Library for going above and beyond with helping me aquire the high resolution version of these maps. ðŸ™Œ</p><h3 id=methodology>Methodology</h3><p>First step in turning the old map scans which come in the form of <a target=_blank href=https://en.wikipedia.org/wiki/Raster_graphics>raster</a> image data into something usefull is to standardize them somehow. Since I had no idea what <a target=_blank href=https://en.wikipedia.org/wiki/Geodetic_datum>datum</a> or <a target=_blank href=https://en.wikipedia.org/wiki/Spatial_reference_system>coordiante reference system</a> (CRS) they were originally created around I couldnâ€™t do a direct transormation. This meant I had to put them through a round of <a target=_blank href=https://en.wikipedia.org/wiki/Georeferencing>georeferencing</a> which is basically just the cartographers version of <a target=_blank href=https://en.wikipedia.org/wiki/Image_registration>image registration</a>. Since my end game was to present these maps over the internet, I knew that the final CRS would need to be the <a targrt=_blank href=https://en.wikipedia.org/wiki/Web_Mercator_projection>web Mercator projection</a> aka EPSG:3857 which is based on the <a target=_blank href=https://en.wikipedia.org/wiki/World_Geodetic_System>WGS 84</a> datum. This is the same system that most web mapping applications such as Google Maps, <a target=_blank href=https://en.wikipedia.org/wiki/OpenStreetMap>OpenStreetMaps</a>, and Bing Maps use.</p><p>With the CRS sorted out, all that was left was to calculate the required transformation which would take take the scanned raster map images and translate them to web Mercator coordinates. This was accomplished through the use of <a target=_blank href=https://en.wikipedia.org/wiki/Thin_plate_spline>thin plate splines</a> (TPS), delaunay triangulation, and <a target=_blank href=https://en.wikipedia.org/wiki/Bicubic_interpolation>bicubic interpolation</a>.</p><p>As the name implies, TPS refers to the imaginary situation in which a thin sheet of metal is undergoing a series of bending operations. The goal with TPS is to maximize the smoothness (or minimize total bending energy) of the final metal surface, because itâ€™s this deflection in the z-axis (orthogonal to the plane) which will control the deformation of our image. Because our images will be deformed in both the x, and y directions, we will need to solve two instances of the TPS equations.</p><p>To begin, let <equation class=has-jax>\( \{s_j\},\{t_j\}, \; j=1,...,n \)</equation> represent the landmarks (x,y coordinate pairs) from the source (<equation class=has-jax>\( s_j \)</equation>) and target (<equation class=has-jax>\( t_j \)</equation>) images. Below is an example of the process. Note that only five coordinate pairs are displayed for visualization purposes. In reality, most maps require at least ~50 coordinate pairs while others require over 300 coordinate pairs.</p><p><img title="georeferencing - initial" src=initial-compare.jpg></p><center class=figcaption>Figure 1: Source (left) and target (right)</center><p>The end goal is to find a smooth function such that: <equation class=has-jax>\( f : \Omega \subset \mathbb{R}^d \to \mathbb{R}^d \)</equation> that satisfies the interpolation conditions:</p><p>$$ f \left( s_j \right) = t_j \qquad \text{for} ; j=1,&mldr;,n \tag{1} $$</p><p>Once these conditions have been met, the situation becomes one of minimization.</p><p>$$ \mathcal{T} \left| f \right| = \sum_{j=1}^n \lVert f \left( s_j \right) - t_j \rVert $$</p><p>where <equation class=has-jax>\( \lVert \cdot \rVert \)</equation> represents the <a target=_blank href=https://en.wikipedia.org/wiki/Norm_(mathematics)#Euclidean_norm>Euclidean norm</a>. Depending on the spatial distribution of the landmark coordinate pairs, the smoothness of the interpolated surface can vary drastically. To help improve the smoothness of the surface, a gradient based regularization term can be added at the expense of losing the initial interpolating conditions from Equation [<a href=#eq-1>1</a>]. The addition of this regularization term produces the following objective function:</p><p>$$ \mathcal{T} \left| f \right| = \sum_{j=1}^n \lVert f \left( s_j \right) - t_j \rVert + \lambda \int_\Omega \lvert \nabla^m f \rvert^2 d\Omega \tag{2} $$</p><p>where <equation class=has-jax>\( \Omega \)</equation> represents the domain of the image. This objective function <equation class=has-jax>\( f \)</equation> is whatâ€™s known as a polyharmonic spline, which when <equation class=has-jax>\( m=2 \)</equation>, becomes a special case known as the thin plate spline. The weight of the regularization parameter is controlled using <equation class=has-jax>\( \lambda \geq 0 \)</equation> (higher values of lambda result in a smoother surface). In two dimensions, the thin plate spline minimizes the following objective function:</p><p>$$ \mathcal{T} \left| f \right| = \sum_{j=1}^n \lVert f \left( s_j \right) - t_j \rVert + \lambda \iint \left[ \left( \frac{\partial^2 f}{\partial y^2} \right)^2 + 2 \left( \frac{\partial^2 f}{\partial y \partial x} \right)^2 + \left( \frac{\partial^2 f}{\partial x^2} \right)^2 \right] dx dy \tag{3} $$</p><p>Equtation [3] represents the closed form solution to the thin plate spline interpolation which was originally developed by Dunchon<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> in 1977. It wasnâ€™t until 1990 when Whaba<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup> proved the existance of a unique minimizer as seen below<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup>:</p><p>$$ f \left(x,y \right) = a_1 + a_2 x + a_3 y + \sum_{j=1}^n w_i U \left( \lVert P_i - (x,y) \rVert \right) \tag{4} $$</p><p>Equation [4] represents the combination of an <a target=_blank href=https://en.wikipedia.org/wiki/Affine_transformation>affine</a> and non-affine transformation. In most texts, the non-affine portion: <equation class=has-jax>\( \ U (r) = \frac{1}{8 \pi} r^2 \log r^2 \)</equation>, is often simplified into Equation [5] because the coefficient <equation class=has-jax>\( \frac{1}{8 \pi} \)</equation> is dissolved into the weight variable <equation class=has-jax>\( w_i \)</equation>.</p><p>$$ U = r^2 \log r^2 \tag{5} $$</p><p>Since the non-affine portion of Equation [4] is a function of radius, it represents the dominate influence of deformation while in close proximity of the control points. Further away from the landmark locations, the strength of the non-affine portion (Equation [5]) diminishes towards zero. This results in the affine portion of Equation [4] exerting more influence at the extremities of the image.</p><p>Now that the transformation between the source and target can be computed, the next step is to resample the pixels. Because the images we will be dealing with come from a scanner or other digital source, each pixel represents a discrete RGB tuple point in gridded two-dimensional space. unfortunately after the TPS transformation has been applied, the pixel locations become stretched and skewed into an unstructured mess. The task at hand is to now interploate these scattered RGB tuples back onto a structured grid so they can be used like a normal image. More specifically, we want to interpolate the RGB values from the displaced source image pixels onto the exact (x, y) pixel grid of the target image.</p><p><img alt="pixel resampling" title="pixel resampling" src=resampling.png></p><center class=figcaption>Figure 2: Pixel resampling</center><p>Unlike the TPS transformation which I had to code from scratch, resampling is a faily common exercise so I was able to use the built in function <code class=highlighter-rouge>griddata</code> found in <a target=_blank href=https://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.griddata.html>SciPy</a>. The <code class=highlighter-rouge>griddata</code> function first generates the <a target=_blank href=https://en.wikipedia.org/wiki/Delaunay_triangulation>delaunay triangulation</a> across all of the displaced source pixels using <a target=_blank href=http://www.qhull.org/>Qhull</a></p><p><img alt="delaunay triangulation" title="delaunay triangulation" src=resampling_with_delaunay.png></p><center class=figcaption>Figure 3: Delaunay triangulation</center><p>Once the triangulation has been generated, a piecewise cubic Bezier polynomial is fitted to each triangle using a Clough-Tocher scheme.<sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup><sup>, </sup><sup id=fnref:5><a href=#fn:5 class=footnote-ref role=doc-noteref>5</a></sup> Since the interpolant is guaranteed to be continuously differentiable, the gradient can be chosen so as to minimize the interpolating surface curvature. The gradient is minimized using a global scheme.<sup id=fnref:6><a href=#fn:6 class=footnote-ref role=doc-noteref>6</a></sup><sup>, </sup><sup id=fnref:7><a href=#fn:7 class=footnote-ref role=doc-noteref>7</a></sup> After the resampling has been applied, an example of the final map can be seen below.</p><p><img title="georeferencing - final" src=final-compare.jpg></p><center class=figcaption>Figure 4: Final transformation</center><p>If youâ€™re interested in georeferencing images for yourself and donâ€™t want to start from scratch like I did, <a target=_blank href=https://qgis.org>QGIS</a> has a very nice georeferencing plugin.</p><h3>References</h3><section class=footnotes role=doc-endnotes><hr><ol><li id=fn:1 role=doc-endnote><p>Jean Duchon. Splines minimizing rotation-invariant semi-norms in sobolev spaces. In Constructive Theory of Functions of Several Variables, pages 85â€“100. Springer, 1977. <a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2 role=doc-endnote><p>Grace Wahba. Spline Models for Observational Data. Society for Industrial and Applied Mathematics, 1990. <a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3 role=doc-endnote><p>Eric Ng. <a target=_blank href=http://www.imaginglab.ca/data/undergrad_thesis_eric.pdf><i>Thin Plate Spline Image Registration in the Presence of Localized Landmark Errors</i></a>. (University of Ontario Institute of Technology, 2017) <a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4 role=doc-endnote><p>Peter Alfeld. <a target=_blank href=https://www.sciencedirect.com/science/article/abs/pii/0167839684900293><i>A trivariate clough-tocher scheme for tetrahedral data</i></a>. (Computer Aided Geometric Design, November 1984, Pages 169-181) <a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:5 role=doc-endnote><p>Gerald Farin. <a target=_blank href=https://www.sciencedirect.com/science/article/abs/pii/0167839686900166><i>Triangular Bernstein-BÃ©zier patches</i></a>. (Computer Aided Geometric Design, August 1986, Pages 83-127) <a href=#fnref:5 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:6 role=doc-endnote><p>Gregory Nielson. <a target=_blank href=https://www.ams.org/journals/mcom/1983-40-161/S0025-5718-1983-0679444-7/S0025-5718-1983-0679444-7.pdf><i>A method for interpolating scattered data based upon a minimum norm network</i></a>. (Mathematics of Computation Volume 40, Number 161. January 1983 Pages 245-271) <a href=#fnref:6 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:7 role=doc-endnote><p>R.J. Renka and A. K. Cline. <a target=_blank href=https://projecteuclid.org/download/pdf_1/euclid.rmjm/1250127673><i>A triangle-based c<sup>1</sup> interpolation method</i></a>. (Rockey Mountain Journal of Mathematics. Volume 14, November 1, Winter 1984 <a href=#fnref:7 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></section></div><hr></div><div class=footer><center>&copy; <a href=/about>Nathan A. Rooy</a>.<br>Built with <a target=_blank href=https://gohugo.io/ rel=nofollow>Hugo</a>.
Powered by <a target=_blank href=http://www.github.com>GitHub</a></center></div></body></html>