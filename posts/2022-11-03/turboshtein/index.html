<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=author content="Nathan Rooy"><meta name=copyright content="Nathan A. Rooy"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=language content="en"><meta http-equiv=content-language content="en-gb"><link rel=icon type=image/png href=/favicon/favicon.png><script defer data-domain=nathanrooy.github.io src=https://plausible.io/js/plausible.js></script><script>window.plausible=window.plausible||function(){(window.plausible.q=window.plausible.q||[]).push(arguments)}</script><meta property="og:title" content="Turboshtein"><meta property="og:description" content="Turboshtein: Possibly the fastest way of computing Levenshtein distance with Python"><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:url" content="https://nathanrooy.github.io/posts/2022-11-03/turboshtein/"><meta property="og:site_name" content="nathanrooy.github.io"><meta property="og:image" content="https://nathanrooy.github.io/about/DSC_3706-EDIT-BLOG-TINY.jpg"><title>Turboshtein</title><link rel=canonical href=https://nathanrooy.github.io/posts/2022-11-03/turboshtein/ itemprop=url><base href=https://nathanrooy.github.io/posts/2022-11-03/turboshtein/><meta itemprop=name content="Turboshtein | Nathan Rooy"><meta itemprop=description content="Turboshtein: Possibly the fastest way of computing Levenshtein distance with Python"><meta itemprop=image content="https://nathanrooy.github.io/about/DSC_3706-EDIT-BLOG-TINY.jpg"><meta name=description content="Turboshtein: Possibly the fastest way of computing Levenshtein distance with Python"><meta name=application-name content="Turboshtein | Nathan Rooy"><meta name=keywords content="turboshtein,levenshtein,edit distance,string similarity,python"><meta name=twitter:card content="nathanrooy.github.io"><meta name=twitter:url content="https://nathanrooy.github.io/posts/2022-11-03/turboshtein/"><meta name=twitter:title content="Turboshtein | Nathan Rooy"><meta name=twitter:description content="Turboshtein: Possibly the fastest way of computing Levenshtein distance with Python"><meta name=twitter:image content="https://nathanrooy.github.io/about/DSC_3706-EDIT-BLOG-TINY.jpg"><link rel=alternate type=application/rss+xml href=https://nathanrooy.github.io/index.xml title="Nathan Rooy"><link rel=stylesheet type=text/css media=screen href=https://nathanrooy.github.io/css/normalize.min.02d927c3d7aee93f4557abffff0169f2c90a749e49700a80350d5b3f2911e20a.css><link rel=stylesheet type=text/css media=screen href=https://nathanrooy.github.io/css/burger.min.cb09226dfc7db8402c87de163295e8e400a3e6bab2a4876a27d30590facdbc8a.css><link rel=stylesheet type=text/css media=screen href=https://nathanrooy.github.io/css/main.min.5d1ec9557db3715f9f6250077b41cbcbad1e40872ef46a61dbbc9946333c0ae6.css></head><body><div class=header><nav role=navigation><div id=burger><input type=checkbox id=burger-cbox autocomplete=off>
<label id=label-1 for=burger-cbox><span>[</span><span id=l1-val>+</span><span>]</span></label>
<label id=label-2 for=burger-cbox><span>[</span><span id=l2-val>x</span><span>]</span></label><div id=nav-icons><a href=/><img src=/icons/home_feather.svg alt="home page icon"></a>
<a href=/reading><img src=/icons/book.svg alt="reading icon"></a>
<a href=/nyc_biking><img src=/icons/bicycle.svg alt="biking page icon"></a>
<a href=/about><img src=/icons/user_feather.svg alt="about page icon"></a></div></div></nav></div><div class="container wrapper post"><div class=post-header><h1 class=title>Turboshtein</h1><div class=meta><a href=/>Nathan Rooy</a> | November 3, 2022</div></div><p class=TLDR><strong>TL;DR</strong> - Possibly the fastest way of computing the Levenshtein distance between two fairly short ASCII strings in Python...</p><div class=markdown><h2 id=background>Background</h2><p>I didn&rsquo;t study computer science so bit shifts and other <a href=https://en.wikipedia.org/wiki/Bitwise_operation>bitwise operations</a> have always been a bit of a gray area for me. I finally gave in and decided to spend some time reading up on the subject and ended up implementing the <em>Myers bit-vector algorithm</em><sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> for computing <a href=https://en.wikipedia.org/wiki/Levenshtein_distance>Levenshtein edit distance</a>. I was fairly happy with the results so I wrapped the original C code in Python and uploaded it to <a href=https://pypi.org/project/turboshtein/>PyPI</a>. Coincidentally, it&rsquo;s also pretty fast.</p><h2 id=usage>Usage</h2><p>To start using Turboshtein, simply install it via PyPi:</p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>pip install turboshtein
</code></pre></div><p>Once installed, computing Levenshtein edit distance then becomes as easy as:</p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=color:#555>&gt;&gt;&gt;</span> <span style=color:#069;font-weight:700>from</span> <span style=color:#0cf;font-weight:700>turboshtein</span> <span style=color:#069;font-weight:700>import</span> levenshtein
<span style=color:#555>&gt;&gt;&gt;</span> levenshtein(<span style=color:#c30>&#34;saturday&#34;</span>, <span style=color:#c30>&#34;sunday&#34;</span>)
<span style=color:#f60>3</span>
</code></pre></div><p>Note, that this particular implementation is limited to ASCII strings of less than 64 characters.</p><h2 id=performance>Performance</h2><p>After implementing the algorithm, I was curious as to what the real world performance looked like. Given a query of length <em>m</em> and a string length of <em>n</em>, its been shown that the edit distance can be computed in <em>O(mn)</em> time.<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup> The approach as described by Myers offers a considerable improvement and requires only <em>O(mn/w)</em> where <em>w</em> is the register size (64-bit in this case). For comparison, I included a handful of the most popular libraries that include a Levenshtein distance function.</p><img src=performance.svg loading=eager alt="turboshtein performance"><p>These values are obviously hardware dependent, but on my dusty laptop I was consistently getting a higher throughput with Turboshtein. For example, with strings of less than 24 characters, Turboshtein is able to crunch through a minimum of 600k additional string pairs per second relative to the next fastest library. For short strings (16 characters or less), that figure jumps up to an additional 800k string pairs per second. Test setup was as follows:</p><table style=margin-top:0;margin-left:1rem><tr><td style=width:8rem>laptop model</td><td style=width:1rem></td><td>XPS 15 9570</td></tr><tr><td>processor</td><td></td><td>Intel i7-8750H</td></tr><tr><td>operating system</td><td></td><td>Fedora Linux 36 (Workstation Edition)</td></tr></table><h2 id=final-thoughts>Final thoughts</h2><p>If you&rsquo;re curious as to what the implementation looks like, <a href=https://github.com/nathanrooy/turboshtein>here is the repo</a>. I suppose at some point, I ought to implement support for non-ASCII characters so maybe check back in the future&mldr;</p><h2 id=references>References</h2><section class=footnotes role=doc-endnotes><hr><ol><li id=fn:1 role=doc-endnote><p>Gene Myers. 1999. A fast bit-vector algorithm for approximate string matching based on dynamic programming. J. ACM 46, 3 (May 1999), 395-415. <a href=https://doi.org/10.1145/316542.316550>https://doi.org/10.1145/316542.316550</a> <a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2 role=doc-endnote><p>Sellers, P. H. 1980. The theory and computation of evolutionary distances: Pattern recognition, Journal of Algorithms 1, 4 (December 1980), 359-373. <a href=https://doi.org/10.1016/0196-6774(80)90016-4>https://doi.org/10.1016/0196-6774(80)90016-4</a> <a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></section></div><div class=separator><ul class=flat><li><a onclick="plausible('home-icon',{props:{method:'Turboshtein'}})" href=/><img style=min-width:30px;position:relative;top:5px;width:20px;height:20px src=/icons/home_feather.svg alt="home page icon"></a></li><li><a onclick="plausible('about-icon',{props:{method:'Turboshtein'}})" href=/about><img style=min-width:30px;position:relative;top:5px;width:20px;height:20px src=/icons/user_feather.svg alt="about page icon"></a></li><li><a onclick="plausible('rss-icon',{props:{method:'Turboshtein'}})" href=/index.xml target=_blank><img style=min-width:30px;position:relative;top:5px;width:20px;height:20px src=/icons/rss_feather_black.svg alt="rss page icon"></a></li></ul></div></div><footer><center>&copy; <a href=/about>Nathan A. Rooy</a>.<br>Built with <a target=_blank rel="noopener noreferrer" href=https://gohugo.io/>Hugo</a>.
Powered by <a target=_blank rel="noopener noreferrer" href=http://www.github.com>GitHub</a></center></footer></body></html>