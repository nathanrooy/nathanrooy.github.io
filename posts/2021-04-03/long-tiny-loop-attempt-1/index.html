<!doctype html><html lang=en><head><meta charset=utf-8><title>Nathan Rooy</title>
<meta content="Nathan Rooy" name=author><meta content="en" name=language><meta content="width=device-width,minimum-scale=1" name=viewport><meta content="nathan.fun" property="og:site_name"><meta content="nathan.fun" property="twitter:domain"><meta content="article" property="og:type"><meta content="https://nathan.fun/posts/2021-04-03/long-tiny-loop-attempt-1/" property="og:url"><meta content="https://nathan.fun/posts/2021-04-03/long-tiny-loop-attempt-1/" name=twitter:url><meta content="Nathan A. Rooy" name=copyright><meta content="summary_large_image" name=twitter:card><meta content="longtinyloop,long tiny loop,biking,maps" name=keywords><meta content="Long Tiny Loop: Attempt #1" name=twitter:title><meta content="Long Tiny Loop: Attempt #1" property="og:title"><meta content="My first attempt at Long Tiny Loop" name=description><meta content="My first attempt at Long Tiny Loop" name=twitter:description><meta content="My first attempt at Long Tiny Loop" property="og:description"><meta content="https://nathan.fun/posts/2021-04-03/long-tiny-loop-attempt-1/my-ltl-close.png" name=twitter:image><meta content="https://nathan.fun/posts/2021-04-03/long-tiny-loop-attempt-1/my-ltl-close.png" property="og:image"><meta content="https://nathan.fun/posts/2021-04-03/long-tiny-loop-attempt-1/my-ltl-close.png" name=thumbnail><link href=https://nathan.fun/index.xml rel=alternate type=application/rss+xml title="Nathan Rooy"><link href=/favicon/favicon.png rel=icon type=image/png><link href=/fonts/figtree-v1-latin-regular.woff2 rel=preload as=font type=font/woff2 crossorigin><link href=https://nathan.fun/posts/2021-04-03/long-tiny-loop-attempt-1/ rel=canonical><script defer data-domain=nathan.fun src=https://plausible.io/js/script.tagged-events.js></script><style>:root{--main-text-color:#222;--main-text-weight:400;--text-bold:600;--font-family:"Figtree", sans-serif;--background-light:#F5F5F5;--link-text-color:#0955b5;--dark-text-color:#999}body{-webkit-font-smoothing:antialiased}@font-face{font-family:figtree;font-style:normal;font-weight:400;font-display:swap;src:url(/fonts/figtree-v1-latin-regular.eot);src:local(''),url(/fonts/figtree-v1-latin-regular.eot?#iefix)format('embedded-opentype'),url(/fonts/figtree-v1-latin-regular.woff2)format('woff2'),url(/fonts/figtree-v1-latin-regular.woff)format('woff'),url(/fonts/figtree-v1-latin-regular.ttf)format('truetype'),url(/fonts/figtree-v1-latin-regular.svg#Figtree)format('svg')}@font-face{font-family:figtree;font-style:normal;font-weight:600;font-display:swap;src:url(/fonts/figtree-v1-latin-600.eot);src:local(''),url(/fonts/figtree-v1-latin-600.eot?#iefix)format('embedded-opentype'),url(/fonts/figtree-v1-latin-600.woff2)format('woff2'),url(/fonts/figtree-v1-latin-600.woff)format('woff'),url(/fonts/figtree-v1-latin-600.ttf)format('truetype'),url(/fonts/figtree-v1-latin-600.svg#Figtree)format('svg')}.home-page{font-family:var(--font-family);color:var(--main-text-color);margin-top:0;padding-bottom:6rem}.home-page ul li{margin-bottom:.3rem}.home-page ul a{color:var(--main-text-color)}@media only screen and (min-width:501px){.wrapper{max-width:660px;margin:0 auto;padding:1rem}.container{margin-top:6rem}.post-li-title{font-size:19px}.post-ul{list-style-type:none;padding-left:0;list-style:none;line-height:1.6em;margin-top:0}.post-li{overflow:hidden}}@media only screen and (max-width:950px){.container{margin-top:0}}@media only screen and (max-width:500px){.wrapper{margin:0 auto}.container{margin:2rem 1rem 1rem}.post-ul{list-style-type:none;padding-left:0;list-style:none;line-height:1.5em;margin-top:.2rem}.post-li{overflow:hidden}}.highlight{margin-bottom:1rem;font-size:14px;line-height:1.2rem}.markdown .footnotes hr{margin-top:4rem;margin-bottom:4rem;height:1px;border:none;color:var(--main-text-color);background-color:var(--main-text-color)}.markdown .footnotes ol{counter-reset:item;padding-left:0;padding-right:0;width:fit-content;color:var(--dark-text-color)}.markdown .footnotes li{display:block;padding-bottom:0}.markdown .footnotes li:before{content:counter(item)". ";counter-increment:item;width:2em;display:inline-block;position:absolute}.markdown .footnotes li p{padding-left:2rem;line-height:1.25rem}.markdown .footnotes li a{color:var(--dark-text-color)}.markdown .footnotes li a:hover{color:var(--main-text-color)}.math-block{margin-top:2rem;margin-bottom:2rem}mtext{position:absolute;right:0}.inline-svg-equation{text-align:center;margin:1.5em auto;max-width:100%;display:block}ul.flat{margin:0;padding:0}ul.flat li{display:inline-block;list-style:none;margin-left:0}.markdown .post-update{background-color:var(--background-light);border-left:10px solid;border-color:#e74c3c;padding-top:1.5rem;padding-left:1.5rem;padding-bottom:1.5rem;padding-right:1.5rem;margin-top:1rem;margin-left:0;margin-right:0;margin-bottom:2rem;line-height:1.5rem;font-weight:var(--main-text-weight);font-size:15px}.highlighter-rouge{position:relative;font-size:.75rem;color:var(--main-text-color);border:1px solid;border-color:#e6e6e6;border-radius:3px;background-color:var(--background-light);padding:.1rem .2rem}.figcaption{font-size:.8rem;padding-bottom:1rem}.markdown{font-family:var(--font-family);color:var(--main-text-color);padding-bottom:8rem}.markdown ol{font-weight:var(--main-text-weight);font-size:16px;margin-top:0;padding-bottom:0;line-height:1.2rem;padding-right:2em;width:85%;margin-block-end:.25em}.markdown ol li{padding-bottom:.75em}.markdown p{font-weight:var(--main-text-weight);font-size:16px;margin-top:0;margin-bottom:1rem;line-height:1.7rem;letter-spacing:.01rem;word-spacing:.025rem}.markdown blockquote{background-color:var(--background-light);border-left:10px solid;border-color:#2dad60;padding-top:1.5rem;padding-left:1.5rem;padding-bottom:1.5rem;padding-right:1.5rem;margin-top:0;margin-left:0;margin-right:0;margin-bottom:1rem;line-height:1.5rem;font-weight:var(--main-text-weight);font-size:15px}.markdown blockquote p{margin-bottom:0}.markdown h2{font-family:var(--font-family);font-size:1.2rem;font-weight:var(--text-bold);margin-bottom:.3em}*+h2{padding-top:2rem}.markdown .ul-style-b li{margin-bottom:.5rem;font-size:16px}.TLDR{font-family:var(--font-family);padding-top:0;margin-top:0;margin-bottom:0;font-size:1.1rem;line-height:1.7rem;font-weight:var(--main-text-weight);letter-spacing:.02rem}table{width:100%;font-size:14px;letter-spacing:-.01em;border-collapse:collapse;margin-bottom:2em;margin-top:2em;font-weight:var(--main-text-weight);line-height:1.2rem}table th{text-align:left}table thead{border-bottom:1px solid var(--main-text-color);line-height:1.4em}.post-header h1{font-weight:var(--main-text-weight);font-size:2.3rem;font-family:var(--font-family);color:var(--main-text-color);line-height:2.64rem}.post ul li{margin-bottom:10px}.post ul li p{display:inline}.post .post-header{margin-bottom:2.5rem}.post .post-header .title{margin:0}.post .post-header a{color:var(--dark-text-color)}.post .post-header a:hover{text-decoration:underline}.post .post-header a:visited{color:var(--dark-text-color)}.post hr{margin-top:4rem;margin-bottom:4rem;height:1px;border:none;color:var(--main-text-color);background-color:var(--main-text-color)}a{text-decoration:none;color:var(--link-text-color)}a:hover{text-decoration:underline}a:visited{color:var(--link-text-color)}::selection{background:#fff9c4;text-shadow:none}#map img{margin:0;max-width:100%;display:block}img{margin:1.5em auto;max-width:100%;display:block}a img{border:none}figure{margin:0;text-align:center}ul{padding-left:15px}ul{list-style:disc inside}.markdown ul li{font-size:15px}.highlight pre{margin-bottom:0;margin-top:0;padding:20px;background-color:transparent!important;overflow:auto;word-wrap:normal;white-space:pre}.highlight{background:0 0;background-color:var(--background-light)}.list .posts .post .meta{margin-bottom:0;margin-left:5px}.post ul li .katex-display{display:inline-block;list-style:none;margin-left:0;margin-bottom:0;line-height:0;padding:0}@media only screen and (min-width:501px){#burger{padding-left:2rem;padding-top:2rem}}@media only screen and (max-width:950px){#burger{padding-left:1rem;padding-top:1rem;padding-bottom:1.5rem}}@media only screen and (max-width:500px){#burger{padding-left:1rem;padding-top:1rem}}#burger{font-family:var(--font-family);font-weight:400;color:#a9a9a9;font-size:1.5rem}#burger a{display:inline-block;padding-right:.8rem}#burger label{cursor:pointer}#burger label:hover{color:var(--main-text-color)}#nav-icons{padding-left:.8rem}#nav-icons svg{max-height:20px;margin-bottom:-.05rem;color:var(--main-text-color)}#l1-val{position:relative;top:-.12rem}#l2-val{position:relative;top:-.2rem;padding-left:.1rem;padding-right:.1rem}#burger-cbox{display:none}#label-1{display:inline-block}#label-2{display:none}#burger-cbox:not(:checked)~#nav-icons{display:none}#burger-cbox:checked~#nav-icons{display:inline-block}#burger-cbox:checked~#label-1{display:none}#burger-cbox:checked~#label-2{display:inline-block;color:var(--main-text-color)}</style></head><body><div class=header><nav><div id=burger><input type=checkbox id=burger-cbox>
<label id=label-1 for=burger-cbox><span>[</span><span id=l1-val>+</span><span>]</span>
</label><label id=label-2 for=burger-cbox><span>[</span><span id=l2-val>x</span><span>]</span></label><div id=nav-icons><a class="plausible-event-name=burger+home" aria-label=Home style=padding-right:.7rem href=/><svg id="home-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather feather-home"><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg></a>
<a class="plausible-event-name=burger+reading" aria-label=Reading href=/reading><svg width="24" height="24" viewBox="0 0 23.809855 18.892912" id="svg5"><defs id="defs2"/><g id="layer1" transform="translate(-6.352941,-30.26865)"><g id="g39" transform="matrix(0.26458333,0,0,0.26458333,5.0300244,26.48677)"><path class="st0" d="m92.22 22.9v59C74.24 76.35 61.26 78.85 54.73 81.04 59.2 76.64 68.54 70.55 84.16 74.14l1.69.39V21.42c2.17.29 4.3.77 6.37 1.48z" id="path11"/><path class="st0" d="M45.24 81.04C38.73 78.85 25.74 76.35 7.77 81.9v-59c2.06-.71 4.2-1.19 6.37-1.48v53.11l1.68-.39c15.61-3.58 24.96 2.5 29.42 6.9z" id="path13"/><polygon points="48.86,85.63 48.82,85.58 48.91,85.63" id="polygon15"/><polygon points="51.17,85.58 51.13,85.63 50,85.63 51.09,85.62" id="polygon17"/><path d="m94.09 20.63c-2.68-1-5.45-1.65-8.24-2.02v-2.94l-1.08-.24c-17.8-4.09-28.32 3.81-32.9 8.68-.81.87-1.44 1.63-1.88 2.22C49.54 25.74 48.91 24.98 48.1 24.11c-4.58-4.87-15.11-12.76-32.9-8.68l-1.07.24v2.94c-2.8.38-5.57 1.02-8.24 2.02L5 20.97V85.7l1.81-.61c13.49-4.49 24.13-4.16 30.68-3.08 7.09 1.15 11.05 3.4 11.09 3.42l.23.14.09.06H50l1.09-.01.08-.05.23-.14c.05-.02 4-2.27 11.09-3.42 6.55-1.08 17.19-1.41 30.68 3.08l1.82.61V20.97zM7.78 81.89v-59c2.06-.71 4.2-1.19 6.37-1.48v53.11l1.68-.39c15.61-3.58 24.95 2.5 29.42 6.9-6.52-2.18-19.5-4.68-37.47.86zm40.76-1.3c-4.19-4.66-14.29-12.83-31.63-9.5v-53.2c11.11-2.28 18.93.38 24.02 3.66 2.6 1.68 4.48 3.52 5.71 4.95 1.14 1.32 1.73 2.28 1.82 2.43l.08.15zm2.76.17V29.34l.24-.4c.09-.16.68-1.12 1.82-2.44 1.23-1.43 3.11-3.27 5.71-4.94 5.08-3.29 12.91-5.95 24.02-3.67v53.2C65.54 67.72 55.4 76.13 51.3 80.76zm40.92 1.13C74.24 76.34 61.26 78.84 54.73 81.03 59.2 76.63 68.54 70.54 84.16 74.13l1.69.39v-53.1c2.16.29 4.3.77 6.37 1.48z" id="path19"/></g></g><style id="style9">.st0{fill:none}</style></svg>
</a><a class="plausible-event-name=burger+nycbike" aria-label="NYC Bike Exploring" style=margin-left:.4rem href=/bike-exploring/nyc><svg viewBox="0 0 91.5 52.5" width="32" height="24" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><g transform="matrix(-1,0,0,1,95.8,-23.9)"><path d="m78 40.6c-3.8.0-7.3 1.2-10.2 3.2l-7.4-9.4 2.9-8.5H67c.6.0 1-.4 1-1s-.4-1-1-1H54.8c-.6.0-1 .4-1 1s.4 1 1 1h6.3l-2.3 6.7c-.2-.2-.4-.3-.7-.3H32l2.2-6.4h5.7c.6.0 1-.4 1-1s-.4-1-1-1h-6.4c-.4.0-.8.3-.9.7l-5.7 16.8c-1.5-.4-3.1-.7-4.8-.7-9.8.0-17.8 8-17.8 17.8s8 17.8 17.8 17.8 17.8-8 17.8-17.8c0-7.5-4.6-13.9-11.2-16.5l2.6-7.6 19 24.4c.1.3.3.6.6.7.1.0.2.1.3.1h.1 8.9c.5 9.4 8.3 16.8 17.8 16.8 9.8.0 17.8-8 17.8-17.8s-8-18-17.8-18zM37.8 58.4c0 8.7-7.1 15.8-15.8 15.8S6.2 67.1 6.2 58.4 13.3 42.6 22 42.6c1.4.0 2.8.2 4.1.6L21 58.1c-.2.5.1 1.1.6 1.3.1.0.2.1.3.1.4.0.8-.3.9-.7l5.1-14.9c5.9 2.2 9.9 7.9 9.9 14.5zm29.7-11.8L76 57.4H62.2c.3-4.3 2.2-8.1 5.3-10.8zm-16.7 9.6-17.1-22h24l.4.5zm1.8 1.2 7.1-20.8 6.6 8.4c-3.5 3.1-5.7 7.4-6 12.4zM78 74.2c-8.4.0-15.2-6.6-15.8-14.8H78c.4.0.7-.2.9-.6.2-.3.1-.8-.1-1.1L69 45.4c2.5-1.8 5.6-2.8 8.9-2.8 8.7.0 15.8 7.1 15.8 15.8s-7 15.8-15.7 15.8z"/></g></svg>
</a><a class="plausible-event-name=burger+about" aria-label=About href=/about><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather feather-user" id="about-icon"><path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
</a><a class="plausible-event-name=burger+rss" aria-label=RSS href=/index.xml><svg width="24" height="24" viewBox="0 0 30 24" fill="none" stroke="#444" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss" id="rss-icon"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></div></div></nav></div><div class="container wrapper post"><div class=post-header><h1 class=title>Long Tiny Loop: Attempt #1</h1></div><hr><div class=markdown><h2 id=introduction>Introduction</h2><p>I’m not exactly sure how I initially came across <a target=_blank rel="noopener noreferrer" href=https://longtinyloop.com/>LongTinyLoop.com</a>, but all I know is that it checks all the right boxes for me. It involves bikes, maps, algorithms, and it’s a competition! So what is Long Tiny Loop? It’s a challenge to travel the longest path, while both minimizing the overall footprint and not breaking the following rules (taken directly <a target=_blank rel="noopener noreferrer" href=https://longtinyloop.com/faq>from here</a>):</p><ol><li>Neglecting to follow established roads and trails (e.g. running around a large empty field)</li><li>Returning to an intersection you’ve already passed through (even at an opposite corner)</li><li>Running the same section of road twice (even on opposite sides)</li><li>Excessive weaving (e.g. multiple unnecessary street crossings)</li><li>Ending the loop more than 100 meters from where it began</li></ol><p>Given this simple rule set, the results tend to yield some really interesting forms often resembling those derived from <a target=_blank rel="noopener noreferrer" href=https://en.wikipedia.org/wiki/Space-filling_curve>space-filling curves</a>.</p><style>@media only screen and (min-width:501px){.img-grid{display:grid;grid-template-columns:1fr 1fr;row-gap:.5em;column-gap:.5em}@media only screen and (max-width:500px){.img-grid{display:grid;grid-template-columns:1fr;row-gap:.5em;column-gap:.5em}}.img-grid img{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;margin-left:0;margin-right:0}}</style><div class=img-grid><img width=100%; src=4234745753_300x300.png alt="long tiny loop by Daniel Aminzade in Mountain View, CA">
<img width=100%; src=4274168837_300x300.png alt="long tiny loop by Daniel Aminzade in Manhattan, NY">
<img width=100%; src=4404329253_300x300.png alt="long tiny loop by Jeff Shaffer in Portland, OR">
<img width=100%; src=4936423662_300x300.png alt="long tiny loop by J.L. de Jong in Cupertino, CA"></div><h2 id=path-design>Path design</h2><p>I created my initial route in <a target=_blank rel="noopener noreferrer" href=https://github.com/qgis/QGIS>QGIS</a> and was really just aiming for a first place position with a score greater than 30.0 and ideally a total distance of less than 70 miles. Not much time was spent optimizing the route other than trying to keep it roughly circular. I did end up writing a quick Python plugin for QGIS which allowed me to instantly calculate the path length, convex hull, <a target=_blank rel="noopener noreferrer" href=https://en.wikipedia.org/wiki/Rotating_calipers>rotating calipers distance</a>, and long tiny loop score for a selected path. I then made this accessible via a keyboard shortcut which helped me quickly iterate through potential designs. Ok, I may have spent a <i>little</i> time optimizing the route, but the whole thing took less than a single weekend… Anyway, the final route had a long tiny loop score of 30.2 and a length 66.7 miles.</p><h2 id=attempt-1>Attempt #1</h2><p>Once the design was finalized in QGIS, I exported the route to a <a target=_blank rel="noopener noreferrer" href=https://en.wikipedia.org/wiki/GPS_Exchange_Format>GPX</a> file so that it could be loaded into Google Maps. I then bought a phone mount for my handlebars for easy hands free navigation. It ended up working pretty good. Below is <a target=_blank rel="noopener noreferrer" href=https://www.strava.com/activities/5019364983>the path</a> as recorded by my phone via Strava.</p><img src=my-ltl-close.png style=width:650px;height:auto;aspect-ratio:1/1 alt="my long tiny loop gps path"><p>Just for some perspective, here&rsquo;s what it looks like from a slightly higher altitude which includes the rest of Brooklyn and the southern end of Manhattan</p><img src=my-ltl-far.svg style=width:650px;height:auto;aspect-ratio:1052/744 alt="my long tiny loop including lower manhattan"><p>Overall I was able to follow the route nearly perfectly, keyword here being <i>nearly</i>. Within the lower region of the route, there were two narrow back alleys I was planning on traversing however they were both blocked by a locked gate. I ended up getting super lucky in that I could simply cut these minor loops out of the overall path without too much of a penalty and without violating any of the long tiny loop rules. Annoyingly though, these two path deviations reduced my final score to 29.75 causing me to just fall short of my goal of getting a 30.0 or higher. 😞</p><img src=blocked-roads-650x400.png style=width:650px;aspect-ratio:650/400 alt="my long tiny loop with blocked road"><p>In the future, I&rsquo;ll make sure to check the route with Google Street View prior to actually going out! On second thought, I&rsquo;ll just limit the next path to actual roads instead. The anxiety that builds up after 4 hrs of tediously following a path and wondering if the next turn will jeopardize the entire operation is substantial. 😂</p><img src=ltl-screenshot.png style=width:650px;aspect-ratio:982/1036 alt="long tiny loop leader board"><h2 id=things-im-trying-next>Things I’m trying next</h2><p>There exists a massive body of literature on computing the shortest path for obvious reasons, the <i>longest path</i> though? Not so much… Actually, there is almost nothing I could find which makes this almost more fun. I’ve already coded out two approaches, one using a reverse <a target=_blank rel="noopener noreferrer" href=https://nathanrooy.github.io/posts/2020-05-14/simulated-annealing-with-python/>simulated annealing</a> method and the other is a genetic/evolutionary scheme. Both are producing decent results but I can already tell that they’ll need some work. Given the nature of this problem, the search space very quickly becomes intractable. A way to accurately and efficiently eliminate large swaths of the domain will be needed to suppress the combinatorial explosion that inevitably happens. Could this finally be the excuse I’ve been looking for to fall down a <a target=_blank rel="noopener noreferrer" href=https://github.com/dmlc/dgl>geometric deep learning</a> rabbit hole?
🤞😈🤞</p><p>I&rsquo;ve also noticed that the paths generated via algorithmic means tend to include <i>way</i> more turning. Since I don&rsquo;t currently price in turning, it&rsquo;s not seen as a liability or the potential time suck they can be. Depending on traffic, I don&rsquo;t usually stop at intersections, but those left-hand turns across large intersections do add up. There is a definite tradeoff between path complexity and speed/mental state. A sub-optimal route with less turning might actually be optimal&mldr; Anyway, I do know that my next Long Tiny Loop attempt will start in the evening and go into the early morning when the city is quiet and the roads are empty.</p><p>Thanks for reading!</p><p>- Nathan</p></div></div></body></html>