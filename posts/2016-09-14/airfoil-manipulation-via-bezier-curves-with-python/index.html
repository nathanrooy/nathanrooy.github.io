<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=author content="Nathan Rooy"><meta name=copyright content="Nathan A. Rooy"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=language content="en"><meta http-equiv=content-language content="en-gb"><link rel=icon type=image/png href=/favicon/favicon.png><meta name=google-site-verification content="vQ6uvoBDOPVq7u67m2fO8RWaxcqsoLrLzmR7CzEo-0k"><meta name=msvalidate.01 content="4903EB9C7ABD70347352DCFAEE0751F5"><meta name=yandex-verification content="d0b7b29586e133fc"><title>2D Airfoil Geometry Manipulation via Composite Quadratic Bézier Curves and Python</title><link rel=canonical href=https://nathanrooy.github.io/posts/2016-09-14/airfoil-manipulation-via-bezier-curves-with-python/ itemprop=url><base href=https://nathanrooy.github.io/posts/2016-09-14/airfoil-manipulation-via-bezier-curves-with-python/><meta itemprop=name content="2D Airfoil Geometry Manipulation via Composite Quadratic Bézier Curves and Python | Nathan Rooy"><meta itemprop=description content="2D Airfoil Geometry Manipulation via Composite Quadratic Bézier Curves and Python"><meta name=description content="2D Airfoil Geometry Manipulation via Composite Quadratic Bézier Curves and Python"><meta name=application-name content="2D Airfoil Geometry Manipulation via Composite Quadratic Bézier Curves and Python | Nathan Rooy"><meta name=twitter:card content="nathanrooy.github.io"><meta name=twitter:url content="https://nathanrooy.github.io/posts/2016-09-14/airfoil-manipulation-via-bezier-curves-with-python/"><meta name=twitter:title content="2D Airfoil Geometry Manipulation via Composite Quadratic Bézier Curves and Python | Nathan Rooy"><meta name=twitter:description content="2D Airfoil Geometry Manipulation via Composite Quadratic Bézier Curves and Python"><meta property="og:title" content="2D Airfoil Geometry Manipulation via Composite Quadratic Bézier Curves and Python"><meta property="og:description" content="2D Airfoil Geometry Manipulation via Composite Quadratic Bézier Curves and Python"><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:url" content="https://nathanrooy.github.io/posts/2016-09-14/airfoil-manipulation-via-bezier-curves-with-python/"><meta property="og:site_name" content="nathanrooy.github.io"><meta itemprop=image content="https://nathanrooy.github.io/about/DSC_3706-EDIT-BLOG-TINY.jpg"><meta property="og:image" content="https://nathanrooy.github.io/about/DSC_3706-EDIT-BLOG-TINY.jpg"><meta name=twitter:image content="https://nathanrooy.github.io/about/DSC_3706-EDIT-BLOG-TINY.jpg"><meta name=twitter:image:src content="https://nathanrooy.github.io/about/DSC_3706-EDIT-BLOG-TINY.jpg"><link rel=alternate type=application/rss+xml href=https://nathanrooy.github.io/index.xml title="Nathan Rooy"><link href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,300italic,400italic|Raleway:200,300" rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://nathanrooy.github.io/css/normalize.css><link rel=stylesheet type=text/css media=screen href=https://nathanrooy.github.io/css/main.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css integrity=sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js integrity=sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js integrity=sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI crossorigin=anonymous onload=renderMathInElement(document.body)></script></head><body><div class="container wrapper post"><div class=header><div style=width:100%;display:inline class=site-title><h1 style=display:inline><a href=https://nathanrooy.github.io/>Nathan Rooy</a></h1><a style=float:right;padding-left:10px;display:inline target=_blank href=/index.xml title=rss><img style=margin:0;padding-top:1.2em src=/icons/rss_feather.svg width=20 height=20></a>
<a style=float:right;padding-left:10px;display:inline target=_blank href=https://github.com/nathanrooy/ title=github><img style=margin:0;padding-top:1.2em src=/icons/github_feather.svg width=20 height=20></a></div><hr style=width:100%;display:inline-block><nav class=nav><ul class=flat><li style=text-align:center;vertical-align:top><a href=/><img height=20px style=margin:0;padding:0 src=/icons/home_feather.svg></a></li><li style=text-align:center;vertical-align:top><a href=/about><img height=20px style=margin:0;padding:0 src=/icons/user_feather.svg></a></li><li style=text-align:center;vertical-align:top><a href=/nyc_biking><img height=20px style=margin:0;padding:0 src=/icons/bicycle.svg></a></li><li><a href=/favorites><img height=20px style=margin:0;padding:0 src=/icons/trending-up_feather.svg></a></li></ul></nav></div><div class=post-header><h1 class=title>2D Airfoil Geometry Manipulation via Composite Quadratic Bézier Curves and Python</h1><div class=meta>Posted: September 14, 2016</div></div><div class=markdown><p>Before any type of shape optimization can occur, the geometry needs to be <a target=_blank href=https://en.wikipedia.org/wiki/Parametrization>parameterized</a> (usually…). One of the easiest ways to accomplish this is through the use of <a target=_blank href=https://en.wikipedia.org/wiki/B%C3%A9zier_curve>Bézier</a> curves. For this tutorial, we’re not going to manipulate an existing geometry, rather we’re going to generate the geometry from scratch using a series of connected Bézier curves called a <a target=_blank href=https://en.wikipedia.org/wiki/Composite_B%C3%A9zier_curve>composite Bézier curve</a>.</p><p>A quadratic Bézier curve is defined using three control points. The first and third point are what’s called anchor points, while the middle point controls the shape of the curve. For <span class=math>\( 0 \le t \le 1 \)</span>, a quadratic Bézier curve is defined as:</p><p><span class=math>\[ B \left ( t \right ) = \left ( 1 - t \right ) \left [ \left ( 1 - t \right ) P_0 + t P_1 \right ] + t \left [ \left ( 1 - t \right ) P_1 + t P_2 \right ] \]</span></p><p>As a quick mental example, t, is a one dimensional array of values going from 0 to 1 such as t=[0.0,0.25,0.5,0.75,1.0]. As we loop through our values within t, we can see that the weighting of each control points changes. At t[0]=0.0, <span class=math>\( P_0 \)</span> has 100% of the influence. As we cycle forward to t[3]=0.5, <span class=math>\( P_1 \)</span> has the dominate influence. And finally, at t[5]=1.0, <span class=math>\( P_2 \)</span> has 100% of the weighting. Below, I have plotted the quadratic Bézier curve <a target=_blank href=https://en.wikipedia.org/wiki/Basis_function>basis function</a> which graphically shows the influence each control point has on the curve as you progress from t=0 to t=1.</p><figure><center><img src=01-tiny.png alt></center></figure><p>To implement this in Python we’ll have two sets of the above equation. One for the x-coordinates and one for the y-coordinates. Below is a very simple code that demonstrates what a single quadratic Bézier curve looks like. GitHub script download (<a target=_blank href=https://github.com/nathanrooy/aerodynamic-shape-optimization/blob/master/simple-quadratic-bezier-curve-example.py>here</a>)</p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#09f;font-style:italic>#------------------------------------------------------------------------------+</span>
<span style=color:#09f;font-style:italic>#</span>
<span style=color:#09f;font-style:italic>#   Nathan A. Rooy</span>
<span style=color:#09f;font-style:italic>#   Simple Quadratic Bezier Curve Example</span>
<span style=color:#09f;font-style:italic>#   2015-08-12</span>
<span style=color:#09f;font-style:italic>#</span>
<span style=color:#09f;font-style:italic>#------------------------------------------------------------------------------+</span>

<span style=color:#09f;font-style:italic>#--- IMPORT DEPENDENCIES ------------------------------------------------------+</span>

<span style=color:#069;font-weight:700>from</span> <span style=color:#0cf;font-weight:700>__future__</span> <span style=color:#069;font-weight:700>import</span> division
<span style=color:#069;font-weight:700>import</span> <span style=color:#0cf;font-weight:700>numpy</span> <span style=color:#069;font-weight:700>as</span> <span style=color:#0cf;font-weight:700>np</span>

<span style=color:#09f;font-style:italic>#--- MAIN ---------------------------------------------------------------------+</span>

numPts<span style=color:#555>=</span><span style=color:#f60>20</span>                                   <span style=color:#09f;font-style:italic># number of points in Bezier Curve</span>
controlPts<span style=color:#555>=</span>[[<span style=color:#f60>0</span>,<span style=color:#f60>0</span>],[<span style=color:#f60>0.5</span>,<span style=color:#f60>1</span>],[<span style=color:#f60>1</span>,<span style=color:#f60>0</span>]]            <span style=color:#09f;font-style:italic># control points</span>
t<span style=color:#555>=</span>np<span style=color:#555>.</span>array([i<span style=color:#555>*</span><span style=color:#f60>1</span><span style=color:#555>/</span>numPts <span style=color:#069;font-weight:700>for</span> i <span style=color:#000;font-weight:700>in</span> <span style=color:#366>range</span>(<span style=color:#f60>0</span>,numPts<span style=color:#555>+</span><span style=color:#f60>1</span>)])

B_x<span style=color:#555>=</span>(<span style=color:#f60>1</span><span style=color:#555>-</span>t)<span style=color:#555>*</span>((<span style=color:#f60>1</span><span style=color:#555>-</span>t)<span style=color:#555>*</span>controlPts[<span style=color:#f60>0</span>][<span style=color:#f60>0</span>]<span style=color:#555>+</span>t<span style=color:#555>*</span>controlPts[<span style=color:#f60>1</span>][<span style=color:#f60>0</span>])<span style=color:#555>+</span>t<span style=color:#555>*</span>((<span style=color:#f60>1</span><span style=color:#555>-</span>t)<span style=color:#555>*</span>controlPts[<span style=color:#f60>1</span>][<span style=color:#f60>0</span>]<span style=color:#555>+</span>t<span style=color:#555>*</span>controlPts[<span style=color:#f60>2</span>][<span style=color:#f60>0</span>])
B_y<span style=color:#555>=</span>(<span style=color:#f60>1</span><span style=color:#555>-</span>t)<span style=color:#555>*</span>((<span style=color:#f60>1</span><span style=color:#555>-</span>t)<span style=color:#555>*</span>controlPts[<span style=color:#f60>0</span>][<span style=color:#f60>1</span>]<span style=color:#555>+</span>t<span style=color:#555>*</span>controlPts[<span style=color:#f60>1</span>][<span style=color:#f60>1</span>])<span style=color:#555>+</span>t<span style=color:#555>*</span>((<span style=color:#f60>1</span><span style=color:#555>-</span>t)<span style=color:#555>*</span>controlPts[<span style=color:#f60>1</span>][<span style=color:#f60>1</span>]<span style=color:#555>+</span>t<span style=color:#555>*</span>controlPts[<span style=color:#f60>2</span>][<span style=color:#f60>1</span>])

<span style=color:#09f;font-style:italic>#--- PLOT ---------------------------------------------------------------------+</span>

<span style=color:#069;font-weight:700>from</span> <span style=color:#0cf;font-weight:700>pylab</span> <span style=color:#069;font-weight:700>import</span> <span style=color:#555>*</span>
xPts,yPts<span style=color:#555>=</span><span style=color:#366>zip</span>(<span style=color:#555>*</span>controlPts)
plot(B_x,B_y,<span style=color:#c30>&#39;b&#39;</span>,label<span style=color:#555>=</span><span style=color:#c30>&#39;Bezier Curve&#39;</span>)
plot(xPts,yPts,color<span style=color:#555>=</span><span style=color:#c30>&#39;#666666&#39;</span>,)
plot(xPts,yPts,<span style=color:#c30>&#39;o&#39;</span>,mfc<span style=color:#555>=</span><span style=color:#c30>&#39;none&#39;</span>,mec<span style=color:#555>=</span><span style=color:#c30>&#39;r&#39;</span>,markersize<span style=color:#555>=</span><span style=color:#f60>8</span>,label<span style=color:#555>=</span><span style=color:#c30>&#39;Control Points&#39;</span>)
plt<span style=color:#555>.</span>title(<span style=color:#c30>&#39;Quadratic Bezier Curve&#39;</span>)
plt<span style=color:#555>.</span>xlim(<span style=color:#555>-</span><span style=color:#f60>0.1</span>,<span style=color:#f60>1.1</span>)
plt<span style=color:#555>.</span>ylim(<span style=color:#555>-</span><span style=color:#f60>0.1</span>,<span style=color:#f60>1.1</span>)
plt<span style=color:#555>.</span>legend(loc<span style=color:#555>=</span><span style=color:#f60>1</span>,fontsize<span style=color:#555>=</span><span style=color:#f60>12</span>)
plt<span style=color:#555>.</span>savefig(<span style=color:#c30>&#39;01-basic-quadratic-bezier-curve.png&#39;</span>,dpi<span style=color:#555>=</span><span style=color:#f60>100</span>)
plt<span style=color:#555>.</span>show()

<span style=color:#09f;font-style:italic>#--- END ----------------------------------------------------------------------+</span></code></pre></div><p>Below is an image of the final product. If we look back at the quadratic Bézier curve formula, <span class=math>\( P_0 \)</span> is the red control point located at (0,0), <span class=math>\( P_1 \)</span> and <span class=math>\( P_2 \)</span> are located at (0.5,1) and (1,0) respectively.</p><figure><center><img src=02-tiny.png alt></center></figure><p>If we animate the above script to show the progression, it becomes very easy to see how Bézier curves actually work.</p><figure><center><img src=03.gif alt></center></figure><p>At least for me, the animation really helps bring a better understanding to the underlying math. So how does this relate to airfoils, geometry manipulation, or aerodynamic design? Simple, all we need to do now is string together a series of these curves so that we can create something useful. This is what’s called a <a target=_blank href=https://en.wikipedia.org/wiki/Composite_B%C3%A9zier_curve>composite Bézier curve</a>, essentially a piecewise series of individual Bézier curves lined up to form a single curve. This will allow us to start creating and manipulating complex geometry. Below is a simple script for generating a composite Bézier curve based off an arbitrary number of control points. GitHub download (<a target=_blank href=https://github.com/nathanrooy/aerodynamic-shape-optimization/blob/master/composite-quadratic-bezier-curve-airfoil-example.py>here</a>).</p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#09f;font-style:italic>#------------------------------------------------------------------------------+</span>
<span style=color:#09f;font-style:italic>#</span>
<span style=color:#09f;font-style:italic>#   Nathan A. Rooy</span>
<span style=color:#09f;font-style:italic>#   Composite Quadratic Bezier Curve Example (Airfoil)</span>
<span style=color:#09f;font-style:italic>#   2015-08-12</span>
<span style=color:#09f;font-style:italic>#</span>
<span style=color:#09f;font-style:italic>#------------------------------------------------------------------------------+</span>

<span style=color:#09f;font-style:italic>#--- IMPORT DEPENDENCIES ------------------------------------------------------+</span>

<span style=color:#069;font-weight:700>from</span> <span style=color:#0cf;font-weight:700>__future__</span> <span style=color:#069;font-weight:700>import</span> division
<span style=color:#069;font-weight:700>import</span> <span style=color:#0cf;font-weight:700>numpy</span> <span style=color:#069;font-weight:700>as</span> <span style=color:#0cf;font-weight:700>np</span>

<span style=color:#09f;font-style:italic>#--- MAIN ---------------------------------------------------------------------+</span>

<span style=color:#069;font-weight:700>def</span> <span style=color:#c0f>quadraticBezier</span>(t,points):
    B_x<span style=color:#555>=</span>(<span style=color:#f60>1</span><span style=color:#555>-</span>t)<span style=color:#555>*</span>((<span style=color:#f60>1</span><span style=color:#555>-</span>t)<span style=color:#555>*</span>points[<span style=color:#f60>0</span>][<span style=color:#f60>0</span>]<span style=color:#555>+</span>t<span style=color:#555>*</span>points[<span style=color:#f60>1</span>][<span style=color:#f60>0</span>])<span style=color:#555>+</span>t<span style=color:#555>*</span>((<span style=color:#f60>1</span><span style=color:#555>-</span>t)<span style=color:#555>*</span>points[<span style=color:#f60>1</span>][<span style=color:#f60>0</span>]<span style=color:#555>+</span>t<span style=color:#555>*</span>points[<span style=color:#f60>2</span>][<span style=color:#f60>0</span>])
    B_y<span style=color:#555>=</span>(<span style=color:#f60>1</span><span style=color:#555>-</span>t)<span style=color:#555>*</span>((<span style=color:#f60>1</span><span style=color:#555>-</span>t)<span style=color:#555>*</span>points[<span style=color:#f60>0</span>][<span style=color:#f60>1</span>]<span style=color:#555>+</span>t<span style=color:#555>*</span>points[<span style=color:#f60>1</span>][<span style=color:#f60>1</span>])<span style=color:#555>+</span>t<span style=color:#555>*</span>((<span style=color:#f60>1</span><span style=color:#555>-</span>t)<span style=color:#555>*</span>points[<span style=color:#f60>1</span>][<span style=color:#f60>1</span>]<span style=color:#555>+</span>t<span style=color:#555>*</span>points[<span style=color:#f60>2</span>][<span style=color:#f60>1</span>])
    <span style=color:#069;font-weight:700>return</span> B_x,B_y

<span style=color:#069;font-weight:700>def</span> <span style=color:#c0f>airfoil</span>(ctlPts,numPts,write):
    curve<span style=color:#555>=</span>[]
    t<span style=color:#555>=</span>np<span style=color:#555>.</span>array([i<span style=color:#555>*</span><span style=color:#f60>1</span><span style=color:#555>/</span>numPts <span style=color:#069;font-weight:700>for</span> i <span style=color:#000;font-weight:700>in</span> <span style=color:#366>range</span>(<span style=color:#f60>0</span>,numPts)])
    
    <span style=color:#09f;font-style:italic># calculate first Bezier curve</span>
    midX<span style=color:#555>=</span>(ctlPts[<span style=color:#f60>1</span>][<span style=color:#f60>0</span>]<span style=color:#555>+</span>ctlPts[<span style=color:#f60>2</span>][<span style=color:#f60>0</span>])<span style=color:#555>/</span><span style=color:#f60>2</span>
    midY<span style=color:#555>=</span>(ctlPts[<span style=color:#f60>1</span>][<span style=color:#f60>1</span>]<span style=color:#555>+</span>ctlPts[<span style=color:#f60>2</span>][<span style=color:#f60>1</span>])<span style=color:#555>/</span><span style=color:#f60>2</span>
    B_x,B_y<span style=color:#555>=</span>quadraticBezier(t,[ctlPts[<span style=color:#f60>0</span>],ctlPts[<span style=color:#f60>1</span>],[midX,midY]])
    curve<span style=color:#555>=</span>curve<span style=color:#555>+</span><span style=color:#366>zip</span>(B_x,B_y)

    <span style=color:#09f;font-style:italic># calculate middle Bezier Curves</span>
    <span style=color:#069;font-weight:700>for</span> i <span style=color:#000;font-weight:700>in</span> <span style=color:#366>range</span>(<span style=color:#f60>1</span>,<span style=color:#366>len</span>(ctlPts)<span style=color:#555>-</span><span style=color:#f60>3</span>):
        p0<span style=color:#555>=</span>ctlPts[i]
        p1<span style=color:#555>=</span>ctlPts[i<span style=color:#555>+</span><span style=color:#f60>1</span>]
        p2<span style=color:#555>=</span>ctlPts[i<span style=color:#555>+</span><span style=color:#f60>2</span>]
        midX_1<span style=color:#555>=</span>(ctlPts[i][<span style=color:#f60>0</span>]<span style=color:#555>+</span>ctlPts[i<span style=color:#555>+</span><span style=color:#f60>1</span>][<span style=color:#f60>0</span>])<span style=color:#555>/</span><span style=color:#f60>2</span>
        midY_1<span style=color:#555>=</span>(ctlPts[i][<span style=color:#f60>1</span>]<span style=color:#555>+</span>ctlPts[i<span style=color:#555>+</span><span style=color:#f60>1</span>][<span style=color:#f60>1</span>])<span style=color:#555>/</span><span style=color:#f60>2</span>
        midX_2<span style=color:#555>=</span>(ctlPts[i<span style=color:#555>+</span><span style=color:#f60>1</span>][<span style=color:#f60>0</span>]<span style=color:#555>+</span>ctlPts[i<span style=color:#555>+</span><span style=color:#f60>2</span>][<span style=color:#f60>0</span>])<span style=color:#555>/</span><span style=color:#f60>2</span>
        midY_2<span style=color:#555>=</span>(ctlPts[i<span style=color:#555>+</span><span style=color:#f60>1</span>][<span style=color:#f60>1</span>]<span style=color:#555>+</span>ctlPts[i<span style=color:#555>+</span><span style=color:#f60>2</span>][<span style=color:#f60>1</span>])<span style=color:#555>/</span><span style=color:#f60>2</span>

        B_x,B_y<span style=color:#555>=</span>quadraticBezier(t,[[midX_1,midY_1],ctlPts[i<span style=color:#555>+</span><span style=color:#f60>1</span>],[midX_2,midY_2]])
        curve<span style=color:#555>=</span>curve<span style=color:#555>+</span><span style=color:#366>zip</span>(B_x,B_y)                      
   
    <span style=color:#09f;font-style:italic># calculate last Bezier curve</span>
    midX<span style=color:#555>=</span>(ctlPts[<span style=color:#555>-</span><span style=color:#f60>3</span>][<span style=color:#f60>0</span>]<span style=color:#555>+</span>ctlPts[<span style=color:#555>-</span><span style=color:#f60>2</span>][<span style=color:#f60>0</span>])<span style=color:#555>/</span><span style=color:#f60>2</span>
    midY<span style=color:#555>=</span>(ctlPts[<span style=color:#555>-</span><span style=color:#f60>3</span>][<span style=color:#f60>1</span>]<span style=color:#555>+</span>ctlPts[<span style=color:#555>-</span><span style=color:#f60>2</span>][<span style=color:#f60>1</span>])<span style=color:#555>/</span><span style=color:#f60>2</span>

    B_x,B_y<span style=color:#555>=</span>quadraticBezier(t,[[midX,midY],ctlPts[<span style=color:#555>-</span><span style=color:#f60>2</span>],ctlPts[<span style=color:#555>-</span><span style=color:#f60>1</span>]])
    curve<span style=color:#555>=</span>curve<span style=color:#555>+</span><span style=color:#366>zip</span>(B_x,B_y)
    curve<span style=color:#555>.</span>append(ctlPts[<span style=color:#555>-</span><span style=color:#f60>1</span>])

    <span style=color:#09f;font-style:italic># write airfoil coordinates to text file</span>
    <span style=color:#069;font-weight:700>if</span> write:
        xPts,yPts<span style=color:#555>=</span><span style=color:#366>zip</span>(<span style=color:#555>*</span>curve)
        f<span style=color:#555>=</span><span style=color:#366>open</span>(<span style=color:#c30>&#39;airfoilCoords.txt&#39;</span>,<span style=color:#c30>&#39;wa&#39;</span>)
        <span style=color:#069;font-weight:700>for</span> i <span style=color:#000;font-weight:700>in</span> <span style=color:#366>range</span>(<span style=color:#366>len</span>(xPts)):
            f<span style=color:#555>.</span>write(<span style=color:#366>str</span>(xPts[i])<span style=color:#555>+</span><span style=color:#c30>&#39;,&#39;</span><span style=color:#555>+</span><span style=color:#366>str</span>(yPts[i])<span style=color:#555>+</span><span style=color:#c30>&#39;</span><span style=color:#c30;font-weight:700>\n</span><span style=color:#c30>&#39;</span>)
        f<span style=color:#555>.</span>close()

    <span style=color:#069;font-weight:700>return</span> curve

<span style=color:#09f;font-style:italic>#--- 11 CONTROL POINT AIRFOIL EXAMPLE -----------------------------------------+</span>

points<span style=color:#555>=</span>[[<span style=color:#f60>1</span>,<span style=color:#f60>0.001</span>],              <span style=color:#09f;font-style:italic># trailing edge (top)</span>
        [<span style=color:#f60>0.76</span>,<span style=color:#f60>0.08</span>],
        [<span style=color:#f60>0.52</span>,<span style=color:#f60>0.125</span>],
        [<span style=color:#f60>0.25</span>,<span style=color:#f60>0.12</span>],
        [<span style=color:#f60>0.1</span>,<span style=color:#f60>0.08</span>],
        [<span style=color:#f60>0</span>,<span style=color:#f60>0.03</span>],               <span style=color:#09f;font-style:italic># leading edge (top)</span>
        [<span style=color:#f60>0</span>,<span style=color:#555>-</span><span style=color:#f60>0.03</span>],              <span style=color:#09f;font-style:italic># leading edge (bottom)</span>
        [<span style=color:#f60>0.15</span>,<span style=color:#555>-</span><span style=color:#f60>0.08</span>],
        [<span style=color:#f60>0.37</span>,<span style=color:#555>-</span><span style=color:#f60>0.01</span>],
        [<span style=color:#f60>0.69</span>,<span style=color:#f60>0.04</span>],
        [<span style=color:#f60>1</span>,<span style=color:#555>-</span><span style=color:#f60>0.001</span>]]             <span style=color:#09f;font-style:italic># trailing edge (bottom)</span>

<span style=color:#09f;font-style:italic>#--- RUN EXAMPLE --------------------------------------------------------------+</span>

curve<span style=color:#555>=</span>airfoil(points,<span style=color:#f60>16</span>,write<span style=color:#555>=</span>True) <span style=color:#09f;font-style:italic># pick even number of points so that the leading edge is defined by a single point...</span>

<span style=color:#09f;font-style:italic>#--- PLOT ---------------------------------------------------------------------+</span>

<span style=color:#069;font-weight:700>from</span> <span style=color:#0cf;font-weight:700>pylab</span> <span style=color:#069;font-weight:700>import</span> <span style=color:#555>*</span>
<span style=color:#069;font-weight:700>import</span> <span style=color:#0cf;font-weight:700>matplotlib.pyplot</span> <span style=color:#069;font-weight:700>as</span> <span style=color:#0cf;font-weight:700>plt</span>

xPts,yPts<span style=color:#555>=</span><span style=color:#366>zip</span>(<span style=color:#555>*</span>points)
xPts2,yPts2<span style=color:#555>=</span><span style=color:#366>zip</span>(<span style=color:#555>*</span>curve)
plot(xPts2,yPts2,<span style=color:#c30>&#39;b&#39;</span>)
plot(xPts,yPts,color<span style=color:#555>=</span><span style=color:#c30>&#39;#666666&#39;</span>)
plot(xPts,yPts,<span style=color:#c30>&#39;o&#39;</span>,mfc<span style=color:#555>=</span><span style=color:#c30>&#39;none&#39;</span>,mec<span style=color:#555>=</span><span style=color:#c30>&#39;r&#39;</span>,markersize<span style=color:#555>=</span><span style=color:#f60>8</span>)
plt<span style=color:#555>.</span>title(<span style=color:#c30>&#39;Composite Quadratic Bezier Curve Based Airfoil&#39;</span>)
plt<span style=color:#555>.</span>xlim(<span style=color:#555>-</span><span style=color:#f60>0.05</span>,<span style=color:#f60>1.05</span>)
plt<span style=color:#555>.</span>ylim(<span style=color:#555>-</span><span style=color:#f60>0.55</span>,<span style=color:#f60>0.55</span>)
<span style=color:#09f;font-style:italic>##plt.savefig(&#39;airfoil-final.png&#39;,dpi=72)</span>
plt<span style=color:#555>.</span>show()

<span style=color:#09f;font-style:italic>#--- END ----------------------------------------------------------------------+</span></code></pre></div><p><center><img src=04-tiny.png></center></p><p>The above example is a generic airfoil featuring 11 unique control points and a finite thickness trailing edge. Now that we have covered the basics, in a future post, I’ll explain how we can use this script to optimize airfoils for a given performance characteristic.</p></div><hr></div><div class=footer><center>&copy; <a href=/about>Nathan A. Rooy</a>.<br>Built with <a target=_blank href=https://gohugo.io/ rel=nofollow>Hugo</a>.
Powered by <a target=_blank href=http://www.github.com>GitHub</a></center></div></body></html>